<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>JSåŸç†ä¸€</title>
      <link href="/posts/undefined.html"/>
      <url>/posts/undefined.html</url>
      
        <content type="html"><![CDATA[<h1 id="JSåŸç†"><a href="#JSåŸç†" class="headerlink" title="JSåŸç†"></a>JSåŸç†</h1><h3 id="çŸ¥è¯†ç‚¹è‡ªæµ‹"><a href="#çŸ¥è¯†ç‚¹è‡ªæµ‹" class="headerlink" title="çŸ¥è¯†ç‚¹è‡ªæµ‹"></a>çŸ¥è¯†ç‚¹è‡ªæµ‹</h3><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">callğŸ§</button></li><li class="tab"><button type="button" data-href="#test-2">applyğŸ§</button></li><li class="tab"><button type="button" data-href="#test-3">bindğŸ§</button></li><li class="tab"><button type="button" data-href="#test-4">å‰©ä½™å‚æ•°ğŸ§</button></li><li class="tab"><button type="button" data-href="#test-5">PromiseğŸ§</button></li><li class="tab"><button type="button" data-href="#test-6">URLSearchParamsğŸ§</button></li><li class="tab"><button type="button" data-href="#test-7">Object.createğŸ§</button></li><li class="tab"><button type="button" data-href="#test-8">Object.assignğŸ§</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><ol><li>å‡½æ•°çš„<code>call</code>æ–¹æ³•-<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call">æ–‡æ¡£é“¾æ¥</a></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»¥æŒ‡å®šçš„thisè°ƒç”¨å‡½æ•°ï¼Œå¹¶é€šè¿‡ ä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹ä¾æ¬¡ä¼ é€’å‚æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">func</span>(<span class="params">name,drink</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>) <span class="comment">// æŒ‡å‘obj  &#123;name: &#x27;kilito&#x27;&#125;</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(name)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(drink)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&#x27;kilito&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// call å‚æ•°1: this  </span></span><br><span class="line"><span class="comment">//      å‚æ•°2: 2-nå‡½æ•°çš„å‚æ•°</span></span><br><span class="line">func.<span class="title function_">call</span>(obj,<span class="string">&#x27;kilito&#x27;</span>,<span class="string">&#x27;å’–å•¡&#x27;</span>)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><ol start="2"><li>å‡½æ•°çš„<code>apply</code>æ–¹æ³•-<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/apply">æ–‡æ¡£é“¾æ¥</a></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»¥æŒ‡å®šçš„thisè°ƒç”¨å‡½æ•°ï¼Œå¹¶é€šè¿‡ æ•°ç»„çš„å½¢å¼ ä¼ é€’å‚æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">func</span>(<span class="params">name,drink</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>) <span class="comment">// æŒ‡å‘obj  &#123;name: &#x27;kilito&#x27;&#125;</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(name)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(drink)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&#x27;kilito&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// apply å‚æ•°1: this</span></span><br><span class="line"><span class="comment">//       å‚æ•°2: ä»¥æ•°ç»„çš„å½¢å¼ä¼ å…¥å‚æ•°</span></span><br><span class="line">func.<span class="title function_">apply</span>(obj,[<span class="string">&#x27;xiaoqing&#x27;</span>,<span class="string">&#x27;å’–å•¡&#x27;</span>])</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><ol start="3"><li>å‡½æ•°çš„<code>bind</code>æ–¹æ³•-<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/bind">æ–‡æ¡£é“¾æ¥</a></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">func</span>(<span class="params">food, drink</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>) <span class="comment">// &#123;name: &#x27;kilito&#x27;&#125;</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(food)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(drink)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;kilito&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿”å›ä¸€ä¸ªç»‘å®šäº†thisçš„æ–°å‡½æ•°ï¼</span></span><br><span class="line"><span class="keyword">const</span> bindFunc = func.<span class="title function_">bind</span>(obj, <span class="string">&#x27;èŠ±èœ&#x27;</span>)</span><br><span class="line"><span class="title function_">bindFunc</span>(<span class="string">&#x27;å¯ä¹&#x27;</span>)</span><br><span class="line"><span class="comment">// const bindFunc = func.bind(obj)</span></span><br><span class="line"><span class="comment">// bindFunc(&#x27;èŠ±èœ&#x27;,å¯ä¹&#x27;)</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><ol start="4"><li>å‰©ä½™å‚æ•°-<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Functions#%E5%89%A9%E4%BD%99%E5%8F%82%E6%95%B0">æ–‡æ¡£é“¾æ¥</a></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">func</span>(<span class="params">...args</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(args)<span class="comment">// ä»¥æ•°ç»„çš„å½¢å¼è·å–ä¼ å…¥çš„æ‰€æœ‰å‚æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">func</span>(<span class="string">&#x27;è¥¿è“èŠ±&#x27;</span>,<span class="string">&#x27;è¥¿è‘«èŠ¦&#x27;</span>,<span class="string">&#x27;è¥¿æ´‹å‚&#x27;</span>,<span class="string">&#x27;è¥¿èŠ¹&#x27;</span>)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div><div class="tab-item-content" id="test-5"><ol start="5"><li>Promiseæ ¸å¿ƒç”¨æ³•-<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Using_promises">æ–‡æ¡£é“¾æ¥</a></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> num = <span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">10</span>)</span><br><span class="line">    <span class="keyword">if</span> (num &gt; <span class="number">5</span>) &#123;</span><br><span class="line">      <span class="title function_">resolve</span>(<span class="string">`æˆåŠŸå•¦--<span class="subst">$&#123;num&#125;</span>`</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">reject</span>(<span class="string">`å¤±è´¥å•¦--<span class="subst">$&#123;num&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;)</span><br><span class="line">p.<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div><div class="tab-item-content" id="test-6"><ol start="6"><li>URLSearchParamsæ ¸å¿ƒç”¨æ³•-<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/URLSearchParams">æ–‡æ¡£é“¾æ¥</a></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ä¾‹åŒ–æ—¶æ”¯æŒä¼ å…¥JSå¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> params = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;jack&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;)</span><br><span class="line"><span class="comment">// toStringæ–¹æ³• è¿”å›æœç´¢å‚æ•°ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œå¯ç›´æ¥ä½¿ç”¨åœ¨ URL ä¸Šã€‚</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(params.<span class="title function_">toString</span>())</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div><div class="tab-item-content" id="test-7"><ol start="7"><li>Object.createæ ¸å¿ƒç”¨æ³•-<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create">æ–‡æ¡£é“¾æ¥</a></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;kilito&#x27;</span>,</span><br><span class="line">  <span class="attr">foods</span>: [<span class="string">&#x27;è¥¿è“èŠ±&#x27;</span>, <span class="string">&#x27;è¥¿çº¢æŸ¿&#x27;</span>, <span class="string">&#x27;è¥¿è‘«èŠ¦&#x27;</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å°†ä¼ å…¥çš„å¯¹è±¡ä½œä¸ºåŸå‹ï¼Œåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼ˆæµ…æ‹·è´ï¼‰</span></span><br><span class="line"><span class="keyword">const</span> clone = <span class="title class_">Object</span>.<span class="title function_">create</span>(person)</span><br><span class="line">clone.<span class="property">name</span> = <span class="string">&#x27;itheima&#x27;</span></span><br><span class="line">clone.<span class="property">foods</span>.<span class="title function_">push</span>(<span class="string">&#x27;è¥¿åŒ—é£&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(clone.<span class="property">foods</span> === person.<span class="property">foods</span>)<span class="comment">// true</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div><div class="tab-item-content" id="test-8"><ol start="8"><li>Object.assignæ ¸å¿ƒç”¨æ³•-<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/assign">æ–‡æ¡£é“¾æ¥</a></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;kilito&#x27;</span>,</span><br><span class="line">  <span class="attr">foods</span>: [<span class="string">&#x27;è¥¿è“èŠ±&#x27;</span>, <span class="string">&#x27;è¥¿çº¢æŸ¿&#x27;</span>, <span class="string">&#x27;è¥¿è‘«èŠ¦&#x27;</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> son = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;rose&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å‚æ•°1 ç›®æ ‡å¯¹è±¡</span></span><br><span class="line"><span class="comment">// å‚æ•°2 æºå¯¹è±¡</span></span><br><span class="line"><span class="comment">// å°†æºå¯¹è±¡çš„è‡ªèº«å±æ€§å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ï¼Œå¹¶è¿”å›ç›®æ ‡å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> returnTarget = <span class="title class_">Object</span>.<span class="title function_">assign</span>(son, person)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(returnTarget === son)<span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(son.<span class="property">name</span>)<span class="comment">// itheima</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(son.<span class="property">foods</span> === person.<span class="property">foods</span>)<span class="comment">// true</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div></div><div class="tabs" id="xmind"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#xmind-1">thisğŸ§</button></li><li class="tab"><button type="button" data-href="#xmind-2">ç»§æ‰¿ğŸ§</button></li><li class="tab"><button type="button" data-href="#xmind-3">classğŸ§</button></li><li class="tab"><button type="button" data-href="#xmind-4">fetchğŸ§</button></li><li class="tab"><button type="button" data-href="#xmind-5">geneatorğŸ§</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="xmind-1"><p><img src="https://bu.dusays.com/2023/08/17/64dda1ff4a71d.png" alt="xmthis.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div><div class="tab-item-content" id="xmind-2"><p><img src="https://bu.dusays.com/2023/08/17/64dd8a4e42783.png" alt="xmjichen.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div><div class="tab-item-content" id="xmind-3"><p><img src="https://bu.dusays.com/2023/08/17/64dd8a44529ff.png" alt="xmclass.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div><div class="tab-item-content" id="xmind-4"><p><img src="https://bu.dusays.com/2023/08/17/64dd8a48a0993.png" alt="xmfetch.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div><div class="tab-item-content" id="xmind-5"><p><img src="https://bu.dusays.com/2023/08/17/64dd8a435f5dc.png" alt="xmgeneator.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div></div><h2 id="JSä¸­çš„this"><a href="#JSä¸­çš„this" class="headerlink" title="JSä¸­çš„this"></a>JSä¸­çš„this</h2><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/this">ä¼ é€é—¨ï¼šMDN-this</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call">ä¼ é€é—¨ï¼šMDN-call</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/apply">ä¼ é€é—¨ï¼šMDN-apply</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/bind">ä¼ é€é—¨ï¼šMDN-bind</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions">ä¼ é€é—¨ï¼šMDN-ç®­å¤´å‡½æ•°</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/rest_parameters">ä¼ é€é—¨ï¼šMDN-å‰©ä½™å‚æ•°</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol">ä¼ é€é—¨ï¼šMDN-Symbol</a></p></blockquote><h3 id="å¦‚ä½•ç¡®è®¤thisæŒ‡å‘ï¼š"><a href="#å¦‚ä½•ç¡®è®¤thisæŒ‡å‘ï¼š" class="headerlink" title="å¦‚ä½•ç¡®è®¤thisæŒ‡å‘ï¼š"></a>å¦‚ä½•ç¡®è®¤thisæŒ‡å‘ï¼š</h3><p>åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå‡½æ•°çš„è°ƒç”¨æ–¹å¼å†³å®šäº† <code>this</code> çš„å€¼ï¼ˆè¿è¡Œæ—¶ç»‘å®šï¼‰</p><p><strong>è°è°ƒç”¨å°±æ˜¯è°ï¼Œç›´æ¥è°ƒç”¨å°±æ˜¯window</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¡ˆä¾‹1</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">func</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>) <span class="comment">// window</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">func</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¡ˆä¾‹2</span></span><br><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;jack&#x27;</span>,</span><br><span class="line">  <span class="attr">sayHi</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)<span class="comment">// person</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">inner</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)<span class="comment">// ç›´æ¥è°ƒç”¨å°±æ˜¯ window</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">inner</span>()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">sayHello</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)<span class="comment">// person</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)<span class="comment">// window</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">person.<span class="title function_">sayHi</span>()</span><br><span class="line">person.<span class="title function_">sayHello</span>()</span><br></pre></td></tr></table></figure><h3 id="å¦‚ä½•æ”¹å˜thisæŒ‡å‘"><a href="#å¦‚ä½•æ”¹å˜thisæŒ‡å‘" class="headerlink" title="å¦‚ä½•æ”¹å˜thisæŒ‡å‘"></a>å¦‚ä½•æ”¹å˜thisæŒ‡å‘</h3><p>ä¸»è¦æœ‰2ç±»æ”¹å˜å‡½æ•°å†…éƒ¨<code>this</code>æŒ‡å‘çš„æ–¹æ³•ï¼š</p><ol><li><p>è°ƒç”¨å‡½æ•°å¹¶ä¼ å…¥å…·ä½“çš„<code>this</code>:</p><ol><li><p><code>call</code>:</p><ol><li>å‚æ•°1:<code>this</code>() ï¼ˆå¸Œæœ›thisæŒ‡å‘è°å°±ä¼ å“ªä¸ªï¼‰</li><li>å‚æ•°2-n:ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°</li></ol></li><li><p><code>apply</code>-æ•°ç»„ä½œä¸ºå‚æ•°</p><ol><li>å‚æ•°1:<code>this</code></li><li>å‚æ•°2:ä»¥æ•°ç»„çš„å½¢å¼,ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°</li></ol></li></ol></li><li><p>åˆ›å»ºç»‘å®š<code>this</code>çš„å‡½æ•°:</p><ol><li>bind:è¿”å›ä¸€ä¸ªç»‘å®šäº†<code>this</code>çš„æ–°å‡½æ•°</li><li>ç®­å¤´å‡½æ•°:æœ€è¿‘çš„thisæ˜¯è°,å°±æ˜¯è°</li></ol></li></ol><p><strong>è°ƒç”¨å‡½æ•°å¹¶ä¼ å…¥å…·ä½“çš„thisï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">funcA</span>(<span class="params">p1, p2</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;funcA-è°ƒç”¨&#x27;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;p1:&#x27;</span>, p1)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;p2:&#x27;</span>, p2)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;kilito&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// callå‚æ•°</span></span><br><span class="line"><span class="comment">// å‚æ•°1 thiså€¼ </span></span><br><span class="line"><span class="comment">// å‚æ•°2-å‚æ•°n æŒ¨ä¸ªä¼ å…¥å‡½æ•°çš„å‚æ•°  </span></span><br><span class="line">funcA.<span class="title function_">call</span>(obj, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="comment">// applyå‚æ•°</span></span><br><span class="line"><span class="comment">// å‚æ•°1 thiså€¼</span></span><br><span class="line"><span class="comment">// å‚æ•°2 ä»¥æ•°ç»„çš„å½¢å¼ä¼ å…¥å‡½æ•°çš„å‚æ•°</span></span><br><span class="line">funcA.<span class="title function_">apply</span>(obj, [<span class="number">3</span>, <span class="number">4</span>])</span><br></pre></td></tr></table></figure><p><strong>åˆ›å»ºç»‘å®šthisçš„å‡½æ•°ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">funcB</span>(<span class="params">p1, p2</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;funcB-è°ƒç”¨&#x27;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;p1:&#x27;</span>, p1)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;p2:&#x27;</span>, p2)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;kilito&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// bindå‚æ•°</span></span><br><span class="line"><span class="comment">// å‚æ•°1 thiså€¼</span></span><br><span class="line"><span class="comment">// å‚æ•°2-å‚æ•°n ç»‘å®šçš„å‚æ•°</span></span><br><span class="line"><span class="keyword">const</span> bindFuncB = funcB.<span class="title function_">bind</span>(person, <span class="number">123</span>)</span><br><span class="line"><span class="title function_">bindFuncB</span>(<span class="number">666</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> student = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;kilito&#x27;</span>,</span><br><span class="line">  <span class="attr">sayHi</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>) <span class="comment">// student</span></span><br><span class="line">    <span class="comment">// ç®­å¤´ä¼šä»è‡ªå·±ä½œç”¨åŸŸé“¾çš„ä¸Šä¸€å±‚ç»§æ‰¿this</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">inner</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;inner-è°ƒç”¨äº†&#x27;</span>)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)  <span class="comment">// student ç®­å¤´å‡½æ•°ä¸­çš„thisï¼ŒæŒ‡å‘æ‰€åœ¨ä½œç”¨åŸŸä¸­çš„this æ²¿ç”¨ä¸Šä¸€å±‚</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">inner</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">student.<span class="title function_">sayHi</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> person = &#123; <span class="comment">// è¿™ä¸ªå¤§æ‹¬å·æ²¡æœ‰åˆ›å»ºä½œç”¨åŸŸ</span></span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;kilito&#x27;</span>,</span><br><span class="line">  <span class="title function_">sayHi</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>) <span class="comment">// person</span></span><br><span class="line">    <span class="comment">// ç®­å¤´ä¼šä»è‡ªå·±ä½œç”¨åŸŸé“¾çš„ä¸Šä¸€å±‚ç»§æ‰¿this</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>) <span class="comment">// person</span></span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">     <span class="comment">// æ˜“æ··æ·†æƒ…å†µï¼ˆä¸è¦è¿™æ ·å†™ï¼‰</span></span><br><span class="line">  <span class="attr">sayHello</span>:<span class="function">()=&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>) <span class="comment">// window</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//person.sayHi()</span></span><br><span class="line">    person.<span class="title function_">sayHello</span>()</span><br></pre></td></tr></table></figure><h3 id="æ‰‹å†™callæ–¹æ³•"><a href="#æ‰‹å†™callæ–¹æ³•" class="headerlink" title="æ‰‹å†™callæ–¹æ³•"></a>æ‰‹å†™callæ–¹æ³•</h3><p>è¿™ä¸€èŠ‚å’±ä»¬æ¥å®ç°<code>myCall</code>æ–¹æ³•ï¼Œå®é™…ç”¨æ³•å’Œ<code>call</code>æ–¹æ³•ä¸€è‡´ï¼Œæ ¸å¿ƒæ­¥éª¤æœ‰4æ­¥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  å®ç°myCall å¯ä»¥å®ç°å¦‚ä¸‹çš„è°ƒç”¨æ•ˆæœ</span></span><br><span class="line"><span class="keyword">const</span> obj2 = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;kilito&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">func2</span>(<span class="params">drink, food</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æˆ‘å«<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>,æˆ‘å–œæ¬¢å–<span class="subst">$&#123;drink&#125;</span>,æˆ‘çˆ±åƒ<span class="subst">$&#123;food&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å‚æ•°1ï¼šthis</span></span><br><span class="line"><span class="comment">// å‚æ•°2-å‚æ•°nï¼šå‚æ•°åˆ—è¡¨ </span></span><br><span class="line">func2.<span class="title function_">myCall</span>(obj2, <span class="string">&#x27;å’–å•¡&#x27;</span>, <span class="string">&#x27;è¥¿å…°èŠ±ç‚’è›‹&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol><li>å¦‚ä½•å®šä¹‰<code>myCall</code>?</li><li>å¦‚ä½•è®©å‡½æ•°å†…éƒ¨çš„<code>this</code>ä¸ºæŸä¸ªå¯¹è±¡ï¼Ÿ</li><li>å¦‚ä½•è®©<code>myCall</code>æ¥æ”¶å‚æ•°2-å‚æ•°n?</li><li>ä½¿ç”¨<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol">Symbol</a>è°ƒä¼˜<code>myCall</code>ï¼Ÿ<ol><li>æ·»åŠ åˆ°åŸå‹ä¸Šï¼Œæ‰€æœ‰å‡½æ•°å‡å¯è°ƒç”¨</li><li>é€šè¿‡ç»™å¯¹è±¡åŠ¨æ€æ·»åŠ å±æ€§çš„æ–¹å¼æ¥æŒ‡å®š this</li><li>â€¦args å‰©ä½™å‚æ•° å®ç°å‚æ•°ä¼ é€’</li><li>é€šè¿‡ Symbo è§£å†³äº†å’Œé»˜è®¤å±æ€§é‡åçš„é—®é¢˜</li></ol></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. å¦‚ä½•å®šä¹‰`myCall`</span></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myCall</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// é€»è¾‘</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2 å¦‚ä½•è®©å‡½æ•°å†…éƒ¨çš„`this`ä¸ºæŸä¸ªå¯¹è±¡                 // thisArg =&gt; &#123; name:&#x27;kilito&#x27; &#125;</span></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myCall</span> = <span class="keyword">function</span> (<span class="params">thisArg</span>) &#123; <span class="comment">// 1. æ¥æ”¶åŸå‡½æ•°çš„thisè¦æŒ‡å‘çš„å¯¹è±¡ thisArg</span></span><br><span class="line">  <span class="comment">// this æ˜¯è°ƒç”¨myCallçš„ å‡½æ•°</span></span><br><span class="line">  <span class="comment">// thisArg æŒ‡å®šçš„this</span></span><br><span class="line">  <span class="comment">// 2.ä¸ºä»–æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§ï¼Œè®©å‡½æ•°æˆä¸ºä»–çš„è¯¥å±æ€§  &#123; name:&#x27;kilito&#x27;,func: åŸå‡½æ•° &#125; </span></span><br><span class="line">  thisArg.<span class="property">func</span> = <span class="variable language_">this</span> <span class="comment">// è¿™ä¸ªthis æ˜¯åŸå‡½æ•°ï¼ˆè°è°ƒç”¨ï¼Œthiså°±æŒ‡å‘è°ï¼‰</span></span><br><span class="line">  <span class="comment">// 3.è°ƒç”¨å¹¶è·å–ç»“æœ</span></span><br><span class="line">  <span class="keyword">const</span> res = thisArg.<span class="title function_">func</span>()</span><br><span class="line">  <span class="comment">// ç§»é™¤æ·»åŠ çš„è‡ªå®šä¹‰å±æ€§</span></span><br><span class="line">  <span class="keyword">delete</span> thisArg.<span class="property">func</span></span><br><span class="line">  <span class="comment">// è¿”å›è°ƒç”¨ç»“æœ</span></span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// func.myCall(obj)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3 å¦‚ä½•è®©`myCall`æ¥æ”¶å‚æ•°2-å‚æ•°n</span></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myCall</span> = <span class="keyword">function</span> (<span class="params">thisArg, ...args</span>) &#123; <span class="comment">// ...argsæ¥å—ä¼ è¿‡æ¥çš„å‚æ•°</span></span><br><span class="line">  thisArg.<span class="property">func</span> = <span class="variable language_">this</span></span><br><span class="line">  <span class="comment">// è°ƒç”¨å¹¶è·å–ç»“æœ</span></span><br><span class="line">  <span class="keyword">const</span> res = thisArg.<span class="title function_">func</span>(...args)  <span class="comment">// ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦ä¼ å…¥åŸå‡½æ•°</span></span><br><span class="line">  <span class="comment">// ç§»é™¤æ·»åŠ çš„è‡ªå®šä¹‰å±æ€§</span></span><br><span class="line">  <span class="keyword">delete</span> thisArg.<span class="property">func</span></span><br><span class="line">  <span class="comment">// è¿”å›è°ƒç”¨ç»“æœ</span></span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// func.myCall(obj,1,2,3,4)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4 ä½¿ç”¨`Symbol`è°ƒä¼˜`myCall`</span></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myCall</span> = <span class="keyword">function</span> (<span class="params">thisArg, ...args</span>) &#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨Symbolç”Ÿæˆå”¯ä¸€æ ‡è®°ï¼Œé¿å…å’ŒåŸå±æ€§å†²çª</span></span><br><span class="line">  <span class="keyword">const</span> fn = <span class="title class_">Symbol</span>()</span><br><span class="line">  <span class="comment">// ç»™å¯¹è±¡åŠ¨æ€æ·»åŠ æ–¹æ³• æŒ‡å®šä¸º this</span></span><br><span class="line">  thisArg[fn] = <span class="variable language_">this</span></span><br><span class="line">  <span class="comment">// è°ƒç”¨</span></span><br><span class="line">  <span class="keyword">const</span> res = thisArg[fn](...args)</span><br><span class="line">  <span class="comment">// ç§»é™¤æ·»åŠ çš„è‡ªå®šä¹‰å±æ€§</span></span><br><span class="line">  <span class="keyword">delete</span> thisArg[fn]</span><br><span class="line">  <span class="comment">// è¿”å›è°ƒç”¨ç»“æœ</span></span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•ä»£ç </span></span><br><span class="line"><span class="keyword">const</span> obj2 = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;æˆ‘æ˜¯å°å°é»‘&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">func2</span>(<span class="params">drink, food</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æˆ‘å«<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>,æˆ‘å–œæ¬¢å–<span class="subst">$&#123;drink&#125;</span>,æˆ‘çˆ±åƒ<span class="subst">$&#123;food&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line">func2.<span class="title function_">myCall</span>(obj2, <span class="string">&#x27;å’–å•¡&#x27;</span>, <span class="string">&#x27;è¥¿å…°èŠ±ç‚’è›‹&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// symbol</span></span><br><span class="line"><span class="comment">// è°ƒç”¨å…¨å±€å‡½æ•° Symbol å¯ä»¥ä¼ å…¥æ ‡è®°ï¼ˆå¯é€‰ï¼‰</span></span><br><span class="line"><span class="keyword">const</span> s1 = <span class="title class_">Symbol</span>()</span><br><span class="line"><span class="keyword">const</span> s2 = <span class="title class_">Symbol</span>()</span><br><span class="line"><span class="keyword">const</span> s3 = <span class="title class_">Symbol</span>(<span class="string">&#x27;kilito&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s1 === s2) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myCall</span> = <span class="keyword">function</span> (<span class="params">thisArg, ...args</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> fn = <span class="title class_">Symbol</span>()</span><br><span class="line">  thisArg[fn] = <span class="variable language_">this</span></span><br><span class="line">  <span class="keyword">const</span> res = thisArg[fn](...args)</span><br><span class="line">  <span class="keyword">delete</span> thisArg[fn]</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://bu.dusays.com/2023/08/16/64dcb002560a2.png" alt="æ‰‹å†™call.png"></p><h3 id="æ‰‹å†™applyæ–¹æ³•"><a href="#æ‰‹å†™applyæ–¹æ³•" class="headerlink" title="æ‰‹å†™applyæ–¹æ³•"></a>æ‰‹å†™applyæ–¹æ³•</h3><p>è¿™ä¸€èŠ‚å’±ä»¬æ¥å®ç°<code>myApply</code>æ–¹æ³•ï¼Œå®é™…ç”¨æ³•å’Œ<code>apply</code>æ–¹æ³•ä¸€è‡´ï¼Œæ ¸å¿ƒæ­¥éª¤ä¾æ—§<code>4</code>æ­¥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  å®ç°myApply å¯ä»¥å®ç°å¦‚ä¸‹çš„è°ƒç”¨æ•ˆæœ</span></span><br><span class="line"><span class="keyword">const</span> obj2 = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;æˆ‘æ˜¯å°å°é»‘&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">func2</span>(<span class="params">drink, food</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æˆ‘å«<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>,æˆ‘å–œæ¬¢å–<span class="subst">$&#123;drink&#125;</span>,æˆ‘çˆ±åƒ<span class="subst">$&#123;food&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å‚æ•°1ï¼šthis</span></span><br><span class="line"><span class="comment">// å‚æ•°2ï¼šæ•°ç»„å½¢å¼ä¼ å…¥çš„å‚æ•°åˆ—è¡¨</span></span><br><span class="line">func2.<span class="title function_">myApply</span>(obj2, [<span class="string">&#x27;å’–å•¡&#x27;</span>, <span class="string">&#x27;è¥¿å…°èŠ±ç‚’è›‹&#x27;</span>])</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol><li>å¦‚ä½•å®šä¹‰<code>myApply</code>? å‡½æ•°Functionçš„åŸå‹ä¸Š</li><li>å¦‚ä½•è®©å‡½æ•°å†…éƒ¨çš„<code>this</code>ä¸ºæŸä¸ªå¯¹è±¡ï¼Ÿç»™å¯¹è±¡åŠ¨æ€å¢åŠ æ–¹æ³•,æ–¹æ³•ä¸ºåŸå‡½æ•°,é€šè¿‡å¯¹è±¡è°ƒç”¨å³å¯</li><li>å¦‚ä½•è®©<code>myApply</code>æ¥æ”¶æ•°ç»„å½¢å¼çš„å‚æ•°åˆ—è¡¨? å®šä¹‰ä¸€ä¸ªå‚æ•°æ¥æ”¶æ•°ç»„å³å¯ å½¢å‚: args,è°ƒç”¨æ—¶,â€¦args</li><li>ä½¿ç”¨<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol">Symbol</a>è°ƒä¼˜<code>myApply</code>ï¼Ÿå’ŒåŸå¯¹è±¡çš„å±æ€§é‡å</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. å¦‚ä½•å®šä¹‰`myApply`</span></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myApply</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// é€»è¾‘ç•¥</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2 å¦‚ä½•è®©å‡½æ•°å†…éƒ¨çš„`this`ä¸ºæŸä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myApply</span> = <span class="keyword">function</span> (<span class="params">thisArg</span>) &#123;</span><br><span class="line">  <span class="comment">// ä¸ºä»–æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§ï¼Œè®©å‡½æ•°æˆä¸ºä»–çš„è¯¥å±æ€§</span></span><br><span class="line">  thisArg[<span class="string">&#x27;fn&#x27;</span>] = <span class="variable language_">this</span></span><br><span class="line">  <span class="comment">// è°ƒç”¨å¹¶è·å–ç»“æœ</span></span><br><span class="line">  <span class="keyword">const</span> res = thisArg[<span class="string">&#x27;fn&#x27;</span>]()</span><br><span class="line">  <span class="comment">// ç§»é™¤æ·»åŠ çš„è‡ªå®šä¹‰å±æ€§</span></span><br><span class="line">  <span class="keyword">delete</span> thisArg[<span class="string">&#x27;fn&#x27;</span>]</span><br><span class="line">  <span class="comment">// è¿”å›è°ƒç”¨ç»“æœ</span></span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3 å¦‚ä½•è®©`myApply`æ¥æ”¶å‚æ•°2-å‚æ•°n</span></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myApply</span> = <span class="keyword">function</span> (<span class="params">thisArg, args</span>) &#123;</span><br><span class="line">  thisArg[<span class="string">&#x27;fn&#x27;</span>] = <span class="variable language_">this</span></span><br><span class="line">  <span class="comment">// è°ƒç”¨å¹¶è·å–ç»“æœ</span></span><br><span class="line">  <span class="comment">// ç”¨... å°†argså±•å¼€ä¼ å…¥</span></span><br><span class="line">  <span class="keyword">const</span> res = thisArg[<span class="string">&#x27;fn&#x27;</span>](...args)</span><br><span class="line">  <span class="comment">// ç§»é™¤æ·»åŠ çš„è‡ªå®šä¹‰å±æ€§</span></span><br><span class="line">  <span class="keyword">delete</span> thisArg[<span class="string">&#x27;fn&#x27;</span>]</span><br><span class="line">  <span class="comment">// è¿”å›è°ƒç”¨ç»“æœ</span></span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4 ä½¿ç”¨`Symbol`è°ƒä¼˜`myApply`</span></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myApply</span> = <span class="keyword">function</span> (<span class="params">thisArg, args</span>) &#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨Symbolç”Ÿæˆå”¯ä¸€æ ‡è®°ï¼Œé¿å…å’ŒåŸå±æ€§å†²çª</span></span><br><span class="line">  <span class="keyword">const</span> fn = <span class="title class_">Symbol</span>()</span><br><span class="line">  thisArg[fn] = <span class="variable language_">this</span></span><br><span class="line">  <span class="keyword">const</span> res = thisArg[fn](...args)</span><br><span class="line">  <span class="comment">// ç§»é™¤æ·»åŠ çš„è‡ªå®šä¹‰å±æ€§</span></span><br><span class="line">  <span class="keyword">delete</span> thisArg[fn]</span><br><span class="line">  <span class="comment">// è¿”å›è°ƒç”¨ç»“æœ</span></span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•ä»£ç </span></span><br><span class="line"><span class="keyword">const</span> obj2 = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;æˆ‘æ˜¯å°å°é»‘&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">func2</span>(<span class="params">drink, food</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æˆ‘å«<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>,æˆ‘å–œæ¬¢å–<span class="subst">$&#123;drink&#125;</span>,æˆ‘çˆ±åƒ<span class="subst">$&#123;food&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line">func2.<span class="title function_">myApply</span>(obj2, [<span class="string">&#x27;å’–å•¡&#x27;</span>, <span class="string">&#x27;è¥¿å…°èŠ±ç‚’è›‹&#x27;</span>])</span><br></pre></td></tr></table></figure><p>å°ç»“ï¼šæ‰‹å†™applyæ–¹æ³•</p><ol><li>å¦‚ä½•å®šä¹‰<code>myApply</code>? å‡½æ•°çš„åŸå‹ä¸Š</li><li>å¦‚ä½•è®©å‡½æ•°å†…éƒ¨çš„<code>this</code>ä¸ºæŸä¸ªå¯¹è±¡ï¼Ÿ åŠ¨æ€ç»™å¯¹è±¡æ·»åŠ æ–¹æ³•,é€šè¿‡å¯¹è±¡çš„æ–¹å¼è°ƒç”¨æ–¹æ³•</li><li>å¦‚ä½•è®©<code>myApply</code>æ¥æ”¶æ•°ç»„å½¢å¼çš„å‚æ•°åˆ—è¡¨?   å½¢å‚: args,è°ƒç”¨æ—¶,â€¦args</li><li>ä½¿ç”¨<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol">Symbol</a>è°ƒä¼˜<code>myApply</code>ï¼Ÿé¿å…å’Œé»˜è®¤å±æ€§é‡å</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myApply</span> = <span class="keyword">function</span> (<span class="params">thisArg, args</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> fn = <span class="title class_">Symbol</span>()</span><br><span class="line">  thisArg[fn] = <span class="variable language_">this</span></span><br><span class="line">  <span class="keyword">const</span> res = thisArg[fn](...args)</span><br><span class="line">  <span class="keyword">delete</span> thisArg[fn]</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ‰‹å†™bindæ–¹æ³•"><a href="#æ‰‹å†™bindæ–¹æ³•" class="headerlink" title="æ‰‹å†™bindæ–¹æ³•"></a>æ‰‹å†™bindæ–¹æ³•</h3><p>è¿™ä¸€èŠ‚å’±ä»¬æ¥å®ç°<code>myBind</code>æ–¹æ³•ï¼Œå®é™…ç”¨æ³•å’Œ<code>bind</code>æ–¹æ³•ä¸€è‡´ï¼Œæ ¸å¿ƒæ­¥éª¤ä¸º2æ­¥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;æˆ‘æ˜¯å°å°é»‘&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">func</span>(<span class="params">drink, food</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æˆ‘å«<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>,æˆ‘å–œæ¬¢å–<span class="subst">$&#123;drink&#125;</span>,æˆ‘çˆ±åƒ<span class="subst">$&#123;food&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è°ƒç”¨bindè·å–ç»‘å®šthisçš„æ–°å‡½æ•°ï¼Œå‚æ•°1ä¸ºå¯ä¹</span></span><br><span class="line"><span class="keyword">const</span> bindFunc = func.<span class="title function_">bind</span>(obj, <span class="string">&#x27;å¯ä¹&#x27;</span>)</span><br><span class="line"><span class="comment">// è°ƒç”¨å‡½æ•°ï¼Œåªéœ€è¦ä¼ é€’å‚æ•°2å³å¯</span></span><br><span class="line"><span class="title function_">bindFunc</span>(<span class="string">&#x27;è¥¿è“èŠ±ç‚’è›‹&#x27;</span>)</span><br></pre></td></tr></table></figure><ol><li>å¦‚ä½•è¿”å›ä¸€ä¸ªç»‘å®šäº†<code>this</code>çš„å‡½æ•°ï¼Ÿ</li><li>å¦‚ä½•å®ç°ç»‘å®šçš„å‚æ•°ï¼ŒåŠä¼ å…¥çš„å‚æ•°åˆå¹¶?</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1 å¦‚ä½•è¿”å›ä¸€ä¸ªç»‘å®šäº†`this`çš„å‡½æ•°</span></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myBind</span> = <span class="keyword">function</span> (<span class="params">thisArg</span>) &#123;</span><br><span class="line">  <span class="comment">// myBindå‡½æ•°è°ƒç”¨æ—¶ï¼Œthiså°±æ˜¯å‡½æ•°æœ¬èº« </span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// é€šè¿‡callæ–¹æ³•å°†ä¼ å…¥çš„ thisArg ä½œä¸ºthisè¿›è¡Œè°ƒç”¨</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">call</span>(thisArg)  <span class="comment">// this æŒ‡å‘ func</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2 å¦‚ä½•å®ç°ç»‘å®šçš„å‚æ•°ï¼ŒåŠä¼ å…¥çš„å‚æ•°åˆå¹¶</span></span><br><span class="line"><span class="comment">// ...args æ¥æ”¶ç»‘å®šå‚æ•°</span></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myBind</span> = <span class="keyword">function</span> (<span class="params">thisArg, ...args</span>) &#123;</span><br><span class="line">  <span class="comment">// ...args2 æ¥æ”¶è°ƒç”¨æ—¶çš„å‚æ•°</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">...args2</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// thisArg éœ€è¦æŒ‡å®šçš„this</span></span><br><span class="line">    <span class="comment">// args è°ƒç”¨myBindæ—¶ä¼ å…¥çš„å‚æ•°</span></span><br><span class="line">    <span class="comment">// args2 è°ƒç”¨æ–°å‡½æ•°æ—¶ä¼ å…¥çš„å‚æ•°</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">call</span>(thisArg, ...args, ...args2)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;æˆ‘æ˜¯å°å°é»‘&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">func</span>(<span class="params">drink, food</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æˆ‘å«<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>,æˆ‘å–œæ¬¢å–<span class="subst">$&#123;drink&#125;</span>,æˆ‘çˆ±åƒ<span class="subst">$&#123;food&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è°ƒç”¨bindè·å–ç»‘å®šthisçš„æ–°å‡½æ•°ï¼Œå‚æ•°1ä¸ºå¯ä¹</span></span><br><span class="line"><span class="keyword">const</span> bindFunc = func.<span class="title function_">bind</span>(obj, <span class="string">&#x27;å¯ä¹&#x27;</span>)</span><br><span class="line"><span class="comment">// è°ƒç”¨å‡½æ•°ï¼Œåªéœ€è¦ä¼ é€’å‚æ•°2å³å¯</span></span><br><span class="line"><span class="title function_">bindFunc</span>(<span class="string">&#x27;è¥¿è“èŠ±ç‚’è›‹&#x27;</span>)</span><br></pre></td></tr></table></figure><p><img src="https://bu.dusays.com/2023/08/16/64dcb004b93cc.png" alt="æ‰‹å†™bind.png"></p><p>å°ç»“ï¼šæ‰‹å†™bindæ–¹æ³•</p><ol><li>å¦‚ä½•è¿”å›ä¸€ä¸ªç»‘å®šäº†<code>this</code>çš„å‡½æ•°ï¼Ÿ</li><li>å¦‚ä½•å®ç°ç»‘å®šçš„å‚æ•°ï¼ŒåŠä¼ å…¥çš„å‚æ•°åˆå¹¶?</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myBind</span> = <span class="keyword">function</span> (<span class="params">thisArg, ...args</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">...args2</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">call</span>(thisArg, ...args, ...args2)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="JSç»§æ‰¿-ES5"><a href="#JSç»§æ‰¿-ES5" class="headerlink" title="JSç»§æ‰¿-ES5"></a>JSç»§æ‰¿-ES5</h2><blockquote><p>è¿™ä¸€èŠ‚å’±ä»¬æ¥å­¦ä¹ å¦‚ä½•åœ¨JSä¸­å®ç°<strong>ç»§æ‰¿</strong>ï¼Œé¦–å…ˆçœ‹çœ‹åœ¨ES6ä¹‹å‰å¯ä»¥å¦‚ä½•å®ç°ç»§æ‰¿</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain">ä¼ é€é—¨:ç»§æ‰¿ä¸åŸå‹é“¾</a></p><p><a href="https://zh.wikipedia.org/wiki/%E7%BB%A7%E6%89%BF_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)">ä¼ é€é—¨:ç»§æ‰¿ï¼ˆè®¡ç®—æœºç§‘å­¦ï¼‰</a></p><p><a href="https://www.ituring.com.cn/book/2472">ä¼ é€é—¨:JavaScripté«˜çº§ç¨‹åºè®¾è®¡</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create">ä¼ é€é—¨:MDN-Object.create</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/assign">ä¼ é€é—¨:MDN-Object.assign</a></p></blockquote><p><strong>ç»§æ‰¿ï¼š</strong>ç»§æ‰¿å¯ä»¥ä½¿å­ç±»å…·æœ‰çˆ¶ç±»çš„å„ç§å±æ€§å’Œæ–¹æ³•ï¼Œè€Œä¸éœ€è¦å†æ¬¡ç¼–å†™ç›¸åŒçš„ä»£ç </p><p>è¿™ä¸€èŠ‚å’±ä»¬ä¼šå­¦ä¹ ES5ä¸­å¸¸è§çš„ç»§æ‰¿å†™æ³•(å‘½ä»¤æ¥æºäº <strong>ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹</strong>)</p><ol><li>åŸå‹é“¾å®ç°ç»§æ‰¿</li><li>æ„é€ å‡½æ•°ç»§æ‰¿</li><li>ç»„åˆç»§æ‰¿</li><li>åŸå‹å¼ç»§æ‰¿</li><li>å¯„ç”Ÿå¼ç»§æ‰¿</li><li>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çˆ¶ç±»</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">foods</span> = [<span class="string">&#x27;è¥¿è“èŠ±&#x27;</span>, <span class="string">&#x27;è¥¿çº¢æŸ¿&#x27;</span>]</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">sayFoods</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">foods</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ES5-åŸå‹é“¾å®ç°ç»§æ‰¿"><a href="#ES5-åŸå‹é“¾å®ç°ç»§æ‰¿" class="headerlink" title="ES5-åŸå‹é“¾å®ç°ç»§æ‰¿"></a>ES5-åŸå‹é“¾å®ç°ç»§æ‰¿</h3><p><strong>æ ¸å¿ƒæ­¥éª¤ï¼š</strong>å¸Œæœ›ç»§æ‰¿è°ï¼Œå°±å°†è°ä½œä¸ºåŸå‹</p><p><strong>ç¼ºç‚¹ï¼š</strong>çˆ¶ç±»ä¸­çš„å¼•ç”¨æ•°æ®ç±»å‹ï¼Œä¼šè¢«æ‰€æœ‰å­ç±»å…±äº«</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çˆ¶ç±»æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">foods</span> = [<span class="string">&#x27;è¥¿è“èŠ±&#x27;</span>, <span class="string">&#x27;è¥¿çº¢æŸ¿&#x27;</span>]</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">sayFoods</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">foods</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å­ç±»æ„é€ å‡½æ•° </span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Son</span>(<span class="params"></span>) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†çˆ¶ç±»çš„å®ä¾‹ ä½œä¸ºå­ç±»çš„åŸå‹</span></span><br><span class="line"><span class="title class_">Son</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Parent</span>(<span class="string">&#x27;jack&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> s1 = <span class="keyword">new</span> <span class="title class_">Son</span>()</span><br><span class="line">s1.<span class="title function_">sayFoods</span>()<span class="comment">// [&#x27;è¥¿è“èŠ±&#x27;, &#x27;è¥¿çº¢æŸ¿&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> s2 = <span class="keyword">new</span> <span class="title class_">Son</span>()</span><br><span class="line">s2.<span class="title function_">sayFoods</span>() <span class="comment">// [&#x27;è¥¿è“èŠ±&#x27;, &#x27;è¥¿çº¢æŸ¿&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s1 === s2) <span class="comment">// false</span></span><br><span class="line"><span class="comment">// å¼•ç”¨æ•°æ®ç±»å‹æ˜¯åŒä¸€ä¸ª</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s1.<span class="property">foods</span> === s2.<span class="property">foods</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">s2.<span class="property">foods</span>.<span class="title function_">push</span>(<span class="string">&#x27;è¥¿è‘«èŠ¦&#x27;</span>)  <span class="comment">// ä¼šå½±å“åˆ° s1</span></span><br><span class="line"></span><br><span class="line">s2.<span class="title function_">sayFoods</span>()<span class="comment">// [&#x27;è¥¿è“èŠ±&#x27;, &#x27;è¥¿çº¢æŸ¿&#x27;, &#x27;è¥¿è‘«èŠ¦&#x27;]</span></span><br><span class="line">s1.<span class="title function_">sayFoods</span>()<span class="comment">// [&#x27;è¥¿è“èŠ±&#x27;, &#x27;è¥¿çº¢æŸ¿&#x27;, &#x27;è¥¿è‘«èŠ¦&#x27;]</span></span><br></pre></td></tr></table></figure><h3 id="ES5-æ„é€ å‡½æ•°ç»§æ‰¿"><a href="#ES5-æ„é€ å‡½æ•°ç»§æ‰¿" class="headerlink" title="ES5-æ„é€ å‡½æ•°ç»§æ‰¿"></a>ES5-æ„é€ å‡½æ•°ç»§æ‰¿</h3><p><strong>æ ¸å¿ƒæ­¥éª¤ï¼š</strong>åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­é€šè¿‡<code>call</code>æˆ–<code>apply</code>çˆ¶ç±»çš„æ„é€ å‡½æ•°</p><p><strong>ç¼ºç‚¹ï¼š</strong>å­ç±»æ²¡æ³•ä½¿ç”¨çˆ¶ç±»åŸå‹ä¸Šçš„å±æ€§&#x2F;æ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çˆ¶ç±»</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name           <span class="comment">// 3. ç»™ä¼ å…¥çš„ this è®¾ç½®å±æ€§/æ–¹æ³•</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Parent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayHi</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ä½ å¥½,æˆ‘å«:&#x27;</span>, <span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­ç±»</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Son</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="title class_">Parent</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, name)  <span class="comment">// 2. this æŒ‡å‘ son çš„å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> s1 = <span class="keyword">new</span> <span class="title class_">Son</span>(<span class="string">&#x27;lucy&#x27;</span>)  <span class="comment">// 1. è°ƒç”¨å­ç±»æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> s2 = <span class="keyword">new</span> <span class="title class_">Son</span>(<span class="string">&#x27;rose&#x27;</span>)</span><br><span class="line">s1.<span class="title function_">sayHi</span>() <span class="comment">// æŠ¥é”™ å­ç±»æ²¡æ³•ç”¨åˆ°çˆ¶ç±»åŸå‹ä¸Šçš„å±æ€§/æ–¹æ³•</span></span><br></pre></td></tr></table></figure><h3 id="ES5-ç»„åˆç»§æ‰¿"><a href="#ES5-ç»„åˆç»§æ‰¿" class="headerlink" title="ES5-ç»„åˆç»§æ‰¿"></a>ES5-ç»„åˆç»§æ‰¿</h3><p>é€šè¿‡ç»„åˆç»§æ‰¿,ç»“åˆåŸå‹é“¾ç»§æ‰¿å’Œæ„é€ å‡½æ•°ç»§æ‰¿2ç§æ–¹æ³•çš„ä¼˜ç‚¹</p><p><strong>æ ¸å¿ƒæ­¥éª¤ï¼š</strong></p><ol><li>é€šè¿‡åŸå‹é“¾ç»§æ‰¿å…¬å…±çš„å±æ€§å’Œæ–¹æ³•</li><li>é€šè¿‡æ„é€ å‡½æ•°ç»§æ‰¿å®ä¾‹ç‹¬æœ‰çš„å±æ€§å’Œæ–¹æ³•</li></ol><p><strong>ç‰¹ç‚¹ï¼š</strong>è°ƒç”¨äº†2æ¬¡æ„é€ å‡½æ•°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çˆ¶ç±»</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å…¬å…±çš„å±æ€§å’Œæ–¹æ³•åŠ çˆ¶ç±»åŸå‹ä¸Š</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayHi</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`ä½ å¥½ï¼Œæˆ‘å«<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å­ç±»æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Student</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">  <span class="comment">// è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ä¼ å…¥this</span></span><br><span class="line">  <span class="title class_">Person</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, name)</span><br><span class="line">  <span class="comment">// å­ç±»ç‹¬æœ‰çš„å±æ€§å’Œæ–¹æ³•å•ç‹¬è®¾ç½®</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è®¾ç½®å­ç±»çš„åŸå‹ä¸º çˆ¶ç±»å®ä¾‹</span></span><br><span class="line"><span class="title class_">Student</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Person</span>()</span><br><span class="line"><span class="comment">// è°ƒç”¨å­ç±»çš„æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&#x27;æé›·&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯ä»¥ä½¿ç”¨åŸå‹é“¾ä¸Šçš„ å±æ€§å’Œæ–¹æ³• ä¹Ÿå¯ä»¥ä½¿ç”¨ é€šè¿‡æ„é€ å‡½æ•°è·å–çš„çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•</span></span><br></pre></td></tr></table></figure><h3 id="ES5-åŸå‹å¼ç»§æ‰¿"><a href="#ES5-åŸå‹å¼ç»§æ‰¿" class="headerlink" title="ES5-åŸå‹å¼ç»§æ‰¿"></a>ES5-åŸå‹å¼ç»§æ‰¿</h3><p>ç›´æ¥åŸºäºå¯¹è±¡å®ç°ç»§æ‰¿</p><p>**æ ¸å¿ƒæ­¥éª¤:**å¯¹æŸä¸ªå¯¹è±¡è¿›è¡Œæµ…æ‹·è´(å·¥å‚å‡½æ•°æˆ–<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create">Object.create</a>),å®ç°ç»§æ‰¿</p><p>**ç¼ºç‚¹:**çˆ¶ç±»ä¸­çš„å¼•ç”¨æ•°æ®ç±»å‹ï¼Œä¼šè¢«æ‰€æœ‰å­ç±»å…±äº«</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> parent = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;parent&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">  <span class="attr">friend</span>: [<span class="string">&#x27;rose&#x27;</span>, <span class="string">&#x27;ice&#x27;</span>, <span class="string">&#x27;robot&#x27;</span>],</span><br><span class="line">  <span class="title function_">sayHi</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>, <span class="variable language_">this</span>.<span class="property">age</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯ä»¥ç”¨ Object.createæ›¿ä»£</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å·¥å‚å‡½æ•°ï¼šè¿”å›ä¸€ä¸ªæ–°å¯¹è±¡</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">objectFactory</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰æ„é€ å‡½æ•°</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">Fun</span>(<span class="params"></span>) &#123; &#125;</span><br><span class="line">    <span class="comment">// ä¼ å…¥çˆ¶ç±»çš„å¯¹è±¡ï¼Œè®¾ç½®ç»™æ„é€ å‡½æ•°çš„åŸå‹</span></span><br><span class="line">  <span class="title class_">Fun</span>.<span class="property"><span class="keyword">prototype</span></span> = obj</span><br><span class="line">    <span class="comment">// è¿”å›äº†å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Fun</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> son1 = <span class="title function_">objectFactory</span>(parent)</span><br><span class="line"><span class="keyword">const</span> son2 = <span class="title function_">objectFactory</span>(parent)</span><br><span class="line">son1.<span class="property">friend</span>.<span class="title function_">push</span>(<span class="string">&#x27;lucy&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// çˆ¶ç±»ä¸­çš„å¼•ç”¨æ•°æ®ç±»å‹ï¼Œä¼šè¢«æ‰€æœ‰å­ç±»å…±äº«</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(son1.<span class="property">friend</span>) <span class="comment">// [&#x27;rose&#x27;, &#x27;ice&#x27;, &#x27;robot&#x27;,&#x27;lucy&#x27;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(son2.<span class="property">friend</span>) <span class="comment">// [&#x27;rose&#x27;, &#x27;ice&#x27;, &#x27;robot&#x27;,&#x27;lucy&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŸå‹é“¾ç»§æ‰¿ï¼ŒåŸºäºæ„é€ å‡½æ•°</span></span><br><span class="line"><span class="comment">// åŸå‹ç»§æ‰¿ï¼ŒåŸºäºå®ä¾‹</span></span><br></pre></td></tr></table></figure><h3 id="ES5-å¯„ç”Ÿå¼ç»§æ‰¿"><a href="#ES5-å¯„ç”Ÿå¼ç»§æ‰¿" class="headerlink" title="ES5-å¯„ç”Ÿå¼ç»§æ‰¿"></a>ES5-å¯„ç”Ÿå¼ç»§æ‰¿</h3><p><strong>æ ¸å¿ƒæ­¥éª¤:</strong></p><p>å®šä¹‰å·¥å‚å‡½æ•°,å¹¶åœ¨å†…éƒ¨:</p><ol><li>å¯¹ä¼ å…¥çš„å¯¹è±¡è¿›è¡Œæµ…æ‹·è´(å…¬å…±å±æ€§&#x2F;æ–¹æ³•)</li><li>ä¸ºæµ…æ‹·è´å¯¹è±¡å¢åŠ å±æ€§&#x2F;æ–¹æ³•(ç‹¬æœ‰å±æ€§&#x2F;æ–¹æ³•)</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è§£å†³å¼•ç”¨ç±»å‹å…±äº«é—®é¢˜</span></span><br><span class="line"><span class="keyword">const</span> parent = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;parent&#x27;</span>,</span><br><span class="line">  <span class="attr">foods</span>: [<span class="string">&#x27;è¥¿è“èŠ±&#x27;</span>, <span class="string">&#x27;ç‚’è›‹&#x27;</span>, <span class="string">&#x27;èŠ±èœ&#x27;</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createAnother</span>(<span class="params">origin</span>) &#123;</span><br><span class="line">  <span class="comment">// Object.createåŸºäºåŸå‹åˆ›å»ºæ–°å¯¹è±¡ï¼Œå¯¹å±æ€§è¿›è¡Œæµ…æ‹·è´</span></span><br><span class="line">  <span class="keyword">const</span> clone = <span class="title class_">Object</span>.<span class="title function_">create</span>(origin)</span><br><span class="line">  <span class="comment">// ä¸ºå¯¹è±¡å¢åŠ å±æ€§/æ–¹æ³•</span></span><br><span class="line">  clone.<span class="property">sayHi</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ä½ å¥½&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> clone</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> son1 = <span class="title function_">createAnother</span>(parent)</span><br><span class="line"><span class="keyword">const</span> son2 = <span class="title function_">createAnother</span>(parent)</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Object.create() é™æ€æ–¹æ³•ä»¥ä¸€ä¸ªç°æœ‰å¯¹è±¡ä½œä¸ºåŸå‹ï¼Œåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment">// åŸºäºä¸€ä¸ªå¯¹è±¡ä½œä¸ºåŸå‹ï¼Œåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</span></span><br><span class="line"><span class="comment">// å¯¹ä¼ å…¥çš„å¯¹è±¡è¿›è¡Œæµ…æ‹·è´</span></span><br><span class="line"><span class="keyword">const</span> father = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;kilito&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="attr">foods</span>: [<span class="string">&#x27;è¥¿ç“œ&#x27;</span>, <span class="string">&#x27;è¥¿å…°èŠ±&#x27;</span> ,<span class="string">&#x27;è¥¿è‘«èŠ¦&#x27;</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> newF = <span class="title class_">Object</span>.<span class="title function_">create</span>(father)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(newF === father) <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(newF.<span class="property">foods</span> === father.<span class="property">foods</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>å¯„ç”Ÿå¼ç»§æ‰¿</p><ol><li><p>å¯„ç”Ÿå¼ç»§æ‰¿çš„æ ¸å¿ƒæ­¥éª¤æ˜¯?</p><ol><li><p>åŸºäºå¯¹è±¡,åˆ›å»ºæ–°å¯¹è±¡</p></li><li><p>å¢åŠ æ–°çš„<strong>å±æ€§å’Œæ–¹æ³•</strong></p></li></ol></li><li><p>å¯„ç”Ÿå¼ç»§æ‰¿å’ŒåŸå‹å¼åŸå‹å¼ç»§æ‰¿çš„åŒºåˆ«æ˜¯?</p><ol><li>åˆ›å»ºå‡ºæ¥çš„æ–°å¯¹è±¡,ä¼šé¢å¤–çš„å¢åŠ æ–°çš„<strong>å±æ€§&#x2F;æ–¹æ³•</strong></li></ol></li></ol><h3 id="ES5-å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"><a href="#ES5-å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿" class="headerlink" title="ES5-å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"></a>ES5-å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿</h3><p><strong>æ ¸å¿ƒæ­¥éª¤:</strong></p><ol><li>é€šè¿‡æ„é€ å‡½æ•°æ¥ç»§æ‰¿å±æ€§</li><li>é€šè¿‡åŸå‹é“¾æ¥ç»§æ‰¿æ–¹æ³•</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»§æ‰¿åŸå‹å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">inheritPrototype</span>(<span class="params">son, parent</span>)&#123;</span><br><span class="line">    <span class="comment">//  åŸºäºçˆ¶ç±»çš„åŸå‹ åˆ›å»ºæ–°çš„å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">const</span> prototype = object.<span class="title function_">create</span>(parent.<span class="property"><span class="keyword">prototype</span></span>)</span><br><span class="line">    <span class="comment">// ä¿è¯åŸå‹ä¸‰è§’çš„å…³ç³»</span></span><br><span class="line">    prototype.<span class="property">constructor</span> = son</span><br><span class="line">    <span class="comment">// è®¾ç½®ç»™å­ç±»çš„ç±»å‹</span></span><br><span class="line">    son.<span class="property"><span class="keyword">prototype</span></span> = prototype</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çˆ¶ç±»æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">foods</span> = [<span class="string">&#x27;è¥¿è“èŠ±&#x27;</span>, <span class="string">&#x27;è¥¿è‘«èŠ¦&#x27;</span>, <span class="string">&#x27;è¥¿çº¢æŸ¿&#x27;</span>]     <span class="comment">// å®ä¾‹å±æ€§ï¼Œå†™æ„é€ å‡½æ•°å†…</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Parent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayHi</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;        <span class="comment">// å…¬å…±çš„æ–¹æ³•å†™åœ¨åŸå‹ä¸Š</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>, <span class="string">`æˆ‘å–œæ¬¢åƒ,<span class="subst">$&#123;<span class="variable language_">this</span>.foods&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­ç±»å€Ÿç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Son</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">    <span class="comment">// ç»§æ‰¿å®ä¾‹å±æ€§</span></span><br><span class="line">  <span class="title class_">Parent</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, name)</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ŒæˆåŸå‹ç»§æ‰¿</span></span><br><span class="line"><span class="title function_">inheritPrototype</span>(<span class="title class_">Son</span>,<span class="title class_">Parent</span>)</span><br><span class="line"><span class="comment">// å¯ä»¥ç»§ç»­åœ¨åŸå‹ä¸Šæ·»åŠ å±æ€§/æ–¹æ³•</span></span><br><span class="line"><span class="title class_">Son</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayAge</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æˆ‘çš„å¹´é¾„æ˜¯&#x27;</span>, <span class="variable language_">this</span>.<span class="property">age</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> son1 = <span class="keyword">new</span> <span class="title class_">Son</span>(<span class="string">&#x27;jack&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="keyword">const</span> son2 = <span class="keyword">new</span> <span class="title class_">Son</span>(<span class="string">&#x27;rose&#x27;</span>, <span class="number">16</span>)</span><br></pre></td></tr></table></figure><h2 id="JSç»§æ‰¿-ES6"><a href="#JSç»§æ‰¿-ES6" class="headerlink" title="JSç»§æ‰¿-ES6"></a>JSç»§æ‰¿-ES6</h2><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/class">ä¼ é€é—¨:mdnç±»</a></p><p><a href="https://wangdoc.com/es6/class">ä¼ é€é—¨:é˜®ä¸€å³°ES6-class</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/super">ä¼ é€é—¨:mdn-super</a></p></blockquote><p>ES6ä¸­æ¨å‡ºäº†<code>class</code>ç±»,æ˜¯ç”¨æ¥åˆ›å»ºå¯¹è±¡çš„æ¨¡æ¿.<code>class</code>å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªè¯­æ³•ç³–,å®ƒçš„ç»å¤§éƒ¨åˆ†åŠŸèƒ½ï¼ŒES5 éƒ½å¯ä»¥åšåˆ°ï¼Œæ–°çš„<code>class</code>å†™æ³•åªæ˜¯è®©å¯¹è±¡åŸå‹çš„å†™æ³•æ›´åŠ æ¸…æ™°ã€æ›´åƒé¢å‘å¯¹è±¡ç¼–ç¨‹çš„è¯­æ³•è€Œå·²ã€‚</p><h3 id="classæ ¸å¿ƒè¯­æ³•"><a href="#classæ ¸å¿ƒè¯­æ³•" class="headerlink" title="classæ ¸å¿ƒè¯­æ³•"></a>classæ ¸å¿ƒè¯­æ³•</h3><p><strong>æ ¸å¿ƒè¯­æ³•:</strong></p><ol><li>å¦‚ä½•å®šä¹‰åŠä½¿ç”¨<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Classes#%E7%B1%BB%E5%A3%B0%E6%98%8E">ç±»</a>:</li><li>å¦‚ä½•å®šä¹‰å®ä¾‹å±æ€§&#x2F;æ–¹æ³•:</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨æ„ï¼šclassæœ¬è´¨è¿˜æ˜¯åŸºäºåŸå‹çš„</span></span><br><span class="line"><span class="comment">// å±æ€§ï¼Œåœ¨å®ä¾‹ä¸Š</span></span><br><span class="line"><span class="comment">// æ–¹æ³•ï¼Œåœ¨åŸå‹ä¸Š</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="comment">// å®ä¾‹å±æ€§ï¼Œæ–¹ä¾¿ä¸€çœ¼ç¡®è®¤æœ‰å“ªäº›ï¼ˆç›´æ¥å†™ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®å€¼ï¼‰</span></span><br><span class="line">  <span class="comment">// å¯ä»¥ä¸å†™ï¼Œæ„é€ å‡½æ•°ä¸­å¯ä»¥é€šè¿‡ this åŠ¨æ€æ·»åŠ </span></span><br><span class="line">  <span class="comment">// å»ºè®®å†™ä¸Š</span></span><br><span class="line">  name</span><br><span class="line">  food</span><br><span class="line">  <span class="comment">// æ„é€ æ–¹æ³•ï¼Œç±»ä¼¼äºæ„é€ å‡½æ•°ï¼Œnewçš„æ—¶å€™ä¼šè°ƒç”¨ï¼Œå†…éƒ¨çš„thiså°±æ˜¯å®ä¾‹åŒ–çš„å¯¹è±¡</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name, food</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">food</span> = food</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å®ä¾‹æ–¹æ³•</span></span><br><span class="line">  <span class="title function_">sayHi</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`ä½ å¥½ï¼Œæˆ‘å«<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>,æˆ‘å–œæ¬¢åƒ<span class="subst">$&#123;<span class="variable language_">this</span>.food&#125;</span>`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;å°é»‘&#x27;</span>, <span class="string">&#x27;è¥¿è“èŠ±&#x27;</span>)</span><br><span class="line">p.<span class="title function_">sayHi</span>()</span><br></pre></td></tr></table></figure><h3 id="classå®ç°ç»§æ‰¿"><a href="#classå®ç°ç»§æ‰¿" class="headerlink" title="classå®ç°ç»§æ‰¿"></a>classå®ç°ç»§æ‰¿</h3><p><strong>å…³é”®è¯­æ³•:</strong></p><ol><li><strong>å­ç±»</strong>é€šè¿‡<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Classes/extends">extends</a>ç»§æ‰¿<strong>çˆ¶ç±»</strong></li><li>å­ç±»æ„é€ å‡½æ•°ä¸­é€šè¿‡<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/super">super</a>è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨ä¸Šä¸€ä»½ä»£ç çš„åŸºç¡€ä¸Šç»§ç»­ç¼–å†™ä¸‹é¢ä»£ç </span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">  song</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name, food, song</span>) &#123;</span><br><span class="line">    <span class="comment">// å­ç±»æ„é€ å‡½æ•°ä½¿ç”¨thisä»¥å‰å¿…é¡»æœ€å¼€å§‹è°ƒç”¨superè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼ï¼ï¼</span></span><br><span class="line">    <span class="variable language_">super</span>(name, food)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">song</span> = song</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ·»åŠ æ–¹æ³•</span></span><br><span class="line">  <span class="title function_">sing</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æˆ‘å«<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>,æˆ‘å–œæ¬¢å”±<span class="subst">$&#123;<span class="variable language_">this</span>.song&#125;</span>`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&#x27;æé›·&#x27;</span>, <span class="string">&#x27;èŠ±èœ&#x27;</span>, <span class="string">&#x27;å­¤å‹‡è€…&#x27;</span>)</span><br><span class="line">s.<span class="title function_">sayHi</span>()</span><br><span class="line">s.<span class="title function_">sing</span>()</span><br></pre></td></tr></table></figure><h3 id="classç§æœ‰-é™æ€å±æ€§å’Œæ–¹æ³•"><a href="#classç§æœ‰-é™æ€å±æ€§å’Œæ–¹æ³•" class="headerlink" title="classç§æœ‰,é™æ€å±æ€§å’Œæ–¹æ³•"></a>classç§æœ‰,é™æ€å±æ€§å’Œæ–¹æ³•</h3><p><strong>è¡¥å……è¯­æ³•:</strong></p><ol><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Classes/Private_class_fields">ç§æœ‰</a>å±æ€§&#x2F;æ–¹æ³•çš„å®šä¹‰åŠä½¿ç”¨(å†…éƒ¨è°ƒç”¨)</li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Classes/static">é™æ€</a>å±æ€§&#x2F;æ–¹æ³•çš„å®šä¹‰åŠä½¿ç”¨(ç±»ç›´æ¥è®¿é—®)</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// é€šè¿‡#ä½œä¸ºå‰ç¼€æ·»åŠ çš„å±æ€§ä¼šå˜ä¸ºç§æœ‰</span></span><br><span class="line">  <span class="comment">// ç§æœ‰å±æ€§</span></span><br><span class="line">  #secret = <span class="string">&#x27;æˆ‘æœ‰ä¸€ä¸ªå°ç§˜å¯†ï¼Œå°±ä¸å‘Šè¯‰ä½ &#x27;</span></span><br><span class="line">  <span class="comment">// ç§æœ‰æ–¹æ³•</span></span><br><span class="line">  #<span class="title function_">say</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ç§æœ‰å±æ€§å¯ä»¥åœ¨</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç§æœ‰çš„sayæ–¹æ³•&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">info</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// åœ¨ç±»çš„å†…éƒ¨å¯ä»¥è®¿é—®ç§æœ‰å±æ€§è°ƒç”¨ç§æœ‰æ–¹æ³•</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.#secret)</span><br><span class="line">    <span class="variable language_">this</span>.#<span class="title function_">say</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€šè¿‡ staticå®šä¹‰é™æ€å±æ€§/æ–¹æ³•</span></span><br><span class="line">  <span class="comment">// è®¿é—®çš„æ—¶å€™ é€šè¿‡ ç±» ç›´æ¥è®¿é—®</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">staticMethod</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è¿™æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•&#x27;</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> info = <span class="string">&#x27;ç›´ç«‹è¡Œèµ°ï¼ŒåŒæ‰‹åŒè„š&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;jack&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p)</span><br><span class="line"><span class="comment">// å¤–éƒ¨æ— æ³•è®¿é—® ç‚¹è¯­æ³•è®¿é—®ç›´æ¥æŠ¥é”™ï¼Œé€šè¿‡[]æ— æ³•åŠ¨æ€è·å–</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p[<span class="string">&#x27;#secret&#x27;</span>])</span><br><span class="line">p.<span class="title function_">info</span>()</span><br><span class="line"><span class="comment">// é€šè¿‡ç±»è®¿é—®é™æ€å±æ€§/æ–¹æ³•</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="title function_">staticMethod</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property">info</span>)</span><br></pre></td></tr></table></figure><h2 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h2><blockquote><p>è¿™ä¸€èŠ‚å’±ä»¬æ¥å­¦ä¹ å†…ç½®å‡½æ•°<code>fetch</code></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/fetch">ä¼ é€é—¨-fetch</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Response">ä¼ é€é—¨-Response</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Headers">ä¼ é€é—¨-Headers</a></p></blockquote><p>å…¨å±€çš„<code>fetch</code>å‡½æ•°ç”¨æ¥å‘èµ·è·å–èµ„æºè¯·æ±‚.ä»–è¿”å›ä¸€ä¸ª<code>promise</code>,è¿™ä¸ª<code>promise</code>ä¼šåœ¨è¯·æ±‚å“åº”åè¢«<code>resolve</code>,å¹¶ä¼ å›Responseå¯¹è±¡</p><ol><li><p><code>fetch</code>æ ¸å¿ƒè¯­æ³•</p></li><li><p><code>fetch</code>ç»“åˆ<code>URLSearchParams</code>å‘é€getè¯·æ±‚:</p><ol><li><pre><code class="javascript">const obj = &#123;    name:&#39;jack&#39;,    age:18&#125;name=jack&amp;age=17<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">3. `fetch`å‘é€postè¯·æ±‚,æäº¤`JSON`æ•°æ®</span><br><span class="line"></span><br><span class="line">4. `fetch`å‘é€postè¯·æ±‚,æäº¤`FormData`æ•°æ®</span><br><span class="line"></span><br><span class="line">### fetchæ ¸å¿ƒè¯­æ³•</span><br><span class="line"></span><br><span class="line">**æ ¸å¿ƒè¯­æ³•:**</span><br><span class="line"></span><br><span class="line">1. å¦‚ä½•[å‘è¯·æ±‚](https://developer.mozilla.org/zh-CN/docs/Web/API/fetch):</span><br><span class="line">2. å¦‚ä½•å¤„ç†[å“åº”](https://developer.mozilla.org/zh-CN/docs/Web/API/Response):</span><br><span class="line">3. æ³¨:[æµ‹è¯•ç”¨æ¥å£](https://apifox.com/apidoc/project-1937884/api-49760223)</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">document.querySelector(&#x27;.request&#x27;).addEventListener(&#x27;click&#x27;,() =&gt; &#123;</span><br><span class="line">    // 1. fetch(urlåœ°å€) ===&gt; Promiseå¯¹è±¡</span><br><span class="line">    fetch(&#x27;http://hmajax.itheima.net/api/news&#x27;).then(response =&gt; &#123;</span><br><span class="line">        // console.log(response)</span><br><span class="line">        // 2. è¯·æ±‚æˆåŠŸä¹‹åï¼Œ resolve  --&gt; then è·å– response</span><br><span class="line">        // 3. è°ƒç”¨ json æ–¹æ³•ï¼Œè·å–è§£æä¹‹åçš„ç»“æœï¼Œè¿”å›Promise</span><br><span class="line">        response.json().then(res =&gt; &#123;</span><br><span class="line">            console.log(res)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// async await æ”¹å†™</span><br><span class="line">document.querySelector(&#x27;.request&#x27;).addEventListener(&#x27;click&#x27;, async() =&gt; &#123;</span><br><span class="line">   const response =  await fetch(&#x27;http://hmajax.itheima.net/api/news&#x27;)</span><br><span class="line">   const res = response.json()</span><br><span class="line">   console.log(res)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></code></pre></li></ol></li></ol><h3 id="fetchç»“åˆURLSearchParamså‘é€getè¯·æ±‚"><a href="#fetchç»“åˆURLSearchParamså‘é€getè¯·æ±‚" class="headerlink" title="fetchç»“åˆURLSearchParamså‘é€getè¯·æ±‚:"></a>fetchç»“åˆURLSearchParamså‘é€getè¯·æ±‚:</h3><p><strong>éœ€æ±‚:</strong></p><ol><li>ä½¿ç”¨<code>fetch</code>ç»“åˆ<code>URLSearchParams</code>è°ƒç”¨åœ°åŒºæŸ¥è¯¢<a href="https://apifox.com/apidoc/project-1937884/api-49760217">æ¥å£</a></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">;(<span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> params = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>(&#123;</span><br><span class="line">    <span class="attr">pname</span>: <span class="string">&#x27;å®‰å¾½çœ&#x27;</span>,</span><br><span class="line">    <span class="attr">cname</span>: <span class="string">&#x27;åˆè‚¥å¸‚&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// console.log(params) URLSearchParams &#123; size: 2 &#125; 2ç»„é”®å€¼å¯¹</span></span><br><span class="line">  <span class="comment">// ä¼ å…¥çš„å¯¹è±¡ï¼Œè½¬ä¸ºæŸ¥è¯¢å­—ç¬¦ä¸²</span></span><br><span class="line">  <span class="comment">// key=value&amp;key=value</span></span><br><span class="line">  <span class="comment">// ä¸­æ–‡ä¼šç¼–ç </span></span><br><span class="line">  <span class="comment">// params.toString() </span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> url = <span class="string">`http://hmajax.itheima.net/api/area?<span class="subst">$&#123;params.toString()&#125;</span>`</span></span><br><span class="line">  <span class="comment">// fetchå‡½æ•°è¿”å›çš„æ˜¯ Promiseå¯¹è±¡ï¼Œé€šè¿‡awaitç­‰å¾…è·å–responseå¯¹è±¡</span></span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(url)</span><br><span class="line">  <span class="comment">// .jsonæ–¹æ³•è¿”å›çš„æ˜¯Promiseå¯¹è±¡ ç»§ç»­é€šè¿‡awaitç­‰å¾…</span></span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> res.<span class="title function_">json</span>()</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure><h3 id="postè¯·æ±‚-æäº¤JSON"><a href="#postè¯·æ±‚-æäº¤JSON" class="headerlink" title="postè¯·æ±‚-æäº¤JSON"></a>postè¯·æ±‚-æäº¤JSON</h3><p><strong>éœ€æ±‚:</strong></p><ol><li><code>fetch</code>å‘é€postè¯·æ±‚,æäº¤<code>JSON</code>æ•°æ®</li><li><a href="https://apifox.com/apidoc/project-1937884/api-49760218">æµ‹è¯•æ¥å£-ç”¨æˆ·æ³¨å†Œ</a></li></ol><p><strong>æ ¸å¿ƒæ­¥éª¤:</strong></p><ol><li>æ ¹æ®æ–‡æ¡£è®¾ç½®è¯·æ±‚å¤´</li><li>é€šè¿‡é…ç½®é¡¹è®¾ç½®,è¯·æ±‚æ–¹æ³•,è¯·æ±‚å¤´,è¯·æ±‚ä½“</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">; (<span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// é€šè¿‡headersè®¾ç½®è¯·æ±‚å¤´</span></span><br><span class="line">  <span class="keyword">const</span> headers = <span class="keyword">new</span> <span class="title class_">Headers</span>()</span><br><span class="line">  <span class="comment">// é€šè¿‡ content-typeæŒ‡å®šè¯·æ±‚ä½“æ•°æ®æ ¼å¼</span></span><br><span class="line">  headers.<span class="title function_">append</span>(<span class="string">&#x27;content-type&#x27;</span>, <span class="string">&#x27;application/json&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// å‚æ•°1 url</span></span><br><span class="line">  <span class="comment">// å‚æ•°2 è¯·æ±‚é…ç½®</span></span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;http://hmajax.itheima.net/api/register&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,<span class="comment">// è¯·æ±‚æ–¹æ³•</span></span><br><span class="line">    headers, <span class="comment">// è¯·æ±‚å¤´</span></span><br><span class="line">    <span class="comment">// è¯·æ±‚ä½“</span></span><br><span class="line">    <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">username</span>: <span class="string">&#x27;itheima9876&#x27;</span>, <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span> &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">const</span> json = <span class="keyword">await</span> res.<span class="title function_">json</span>()</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(json)</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure><p>postè¯·æ±‚-æäº¤JSON</p><ol><li><code>fetch</code>å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥è®¾ç½®è¯·æ±‚å¤´,è¯·æ±‚æ–¹æ³•,è¯·æ±‚ä½“</li></ol><h3 id="postè¯·æ±‚-æäº¤FormData"><a href="#postè¯·æ±‚-æäº¤FormData" class="headerlink" title="postè¯·æ±‚-æäº¤FormData"></a>postè¯·æ±‚-æäº¤FormData</h3><p><strong>éœ€æ±‚:</strong></p><ol><li><code>fetch</code>å‘é€postè¯·æ±‚,æäº¤<code>FormData</code>æ•°æ®(ä¸Šä¼ +å›æ˜¾)</li><li><a href="https://apifox.com/apidoc/project-1937884/api-49760221">æµ‹è¯•æ¥å£-ä¸Šä¼ å›¾ç‰‡</a></li></ol><p><strong>æ ¸å¿ƒæ­¥éª¤:</strong></p><ol><li>é€šè¿‡<code>FormData</code>æ·»åŠ æ–‡ä»¶</li><li>é€šè¿‡é…ç½®é¡¹è®¾ç½®,è¯·æ±‚æ–¹æ³•,è¯·æ±‚ä½“(<code>FormData</code>ä¸éœ€è¦è®¾ç½®è¯·æ±‚å¤´)</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;file&quot;</span> <span class="keyword">class</span>=<span class="string">&quot;file&quot;</span> accept=<span class="string">&quot;image/*&quot;</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.file&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;change&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// ç”ŸæˆFormDataå¯¹è±¡å¹¶æ·»åŠ æ•°æ®</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> data = <span class="keyword">new</span> <span class="title class_">FormData</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    data.<span class="title function_">append</span>(<span class="string">&#x27;img&#x27;</span>, <span class="variable language_">this</span>.<span class="property">files</span>[<span class="number">0</span>])</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;http://hmajax.itheima.net/api/uploadimg&#x27;</span>, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">body</span>: data</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> json = <span class="keyword">await</span> res.<span class="title function_">json</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(json)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h4 id=""><a href="#" class="headerlink" title=""></a></h4><h2 id="Generator"><a href="#Generator" class="headerlink" title="Generator"></a>Generator</h2><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Generator">ä¼ é€é—¨-Generator</a></p></blockquote><p><code>Generator</code>å¯¹è±¡ç”±<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/function*">ç”Ÿæˆå™¨å‡½æ•°</a>è¿”å›å¹¶ä¸”å®ƒç¬¦åˆ<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Iteration_protocols#%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%8D%8F%E8%AE%AE">å¯è¿­ä»£åè®®</a>å’Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Iteration_protocols#%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%8D%8F%E8%AE%AE">è¿­ä»£å™¨åè®®</a>.ä»–å¯ä»¥ç”¨æ¥<strong>æ§åˆ¶æµç¨‹</strong>,è¯­æ³•è¡Œä¸ºå’Œä¹‹å‰å­¦ä¹ çš„å‡½æ•°ä¸ä¸€æ ·</p><h3 id="Generator-æ ¸å¿ƒè¯­æ³•"><a href="#Generator-æ ¸å¿ƒè¯­æ³•" class="headerlink" title="Generator-æ ¸å¿ƒè¯­æ³•"></a>Generator-æ ¸å¿ƒè¯­æ³•</h3><p><strong>æ ¸å¿ƒè¯­æ³•:</strong></p><ol><li>å¦‚ä½•å®šä¹‰ç”Ÿæˆå™¨å‡½æ•°:</li><li>å¦‚ä½•è·å–<code>generator</code>å¯¹è±¡</li><li><code>yield</code>è¡¨è¾¾å¼çš„ä½¿ç”¨</li><li>é€šè¿‡<code>for of</code>è·å–æ¯ä¸€ä¸ª<code>yield</code>çš„å€¼</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. é€šè¿‡function* åˆ›å»ºç”Ÿæˆå™¨å‡½æ•° </span></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ç”Ÿæˆå™¨å‡½æ•°å†…éƒ¨çš„é€»è¾‘ï¼Œä¸ä¼šè‡ªåŠ¨è°ƒç”¨ï¼Œè°ƒç”¨ Generator å¯¹è±¡çš„ next() æ–¹æ³•  </span></span><br><span class="line">  <span class="comment">// é‡åˆ°yieldè¡¨è¾¾å¼æ—¶ä¼šæš‚åœåç»­çš„æ“ä½œ ï¼ˆ*å¯¹åº”async  yieldå¯¹åº”awaitï¼‰</span></span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;a&#x27;</span></span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;b&#x27;</span></span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;c&#x27;</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;d&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2. è°ƒç”¨å‡½æ•°è·å–ç”Ÿæˆå™¨</span></span><br><span class="line"><span class="keyword">const</span> f = <span class="title function_">foo</span>()</span><br><span class="line"><span class="comment">// 3. é€šè¿‡nextæ–¹æ³•è·å–yield ä¹‹åçš„è¡¨è¾¾å¼ç»“æœï¼Œä¼šè¢«åŒ…è£…åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­</span></span><br><span class="line"><span class="comment">// æ‰§è¡Œä¸€æ¬¡next å³å¯è·å–ä¸€æ¬¡ yieldä¹‹åçš„è¡¨è¾¾å¼ç»“æœ</span></span><br><span class="line"><span class="keyword">const</span> res1 = f.<span class="title function_">next</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res1)<span class="comment">// &#123;value: &#x27;a&#x27;, done: false&#125;</span></span><br><span class="line"><span class="keyword">const</span> res2 = f.<span class="title function_">next</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res2)<span class="comment">// &#123;value: &#x27;b&#x27;, done: false&#125;</span></span><br><span class="line"><span class="keyword">const</span> res3 = f.<span class="title function_">next</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res3)<span class="comment">// &#123;value: &#x27;c&#x27;, done: false&#125;</span></span><br><span class="line"><span class="comment">// æœ€åä¸€æ¬¡å¯ä»¥æ‹¿åˆ°returnçš„ç»“æœ</span></span><br><span class="line"><span class="keyword">const</span> res4 = f.<span class="title function_">next</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res4)<span class="comment">// &#123;value: &#x27;d&#x27;, done: true&#125; </span></span><br><span class="line"><span class="comment">// done ä¸ºtrueä¹‹åï¼Œè·å–åˆ°çš„valueä¸ºundefined</span></span><br><span class="line"><span class="keyword">const</span> res5 = f.<span class="title function_">next</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res5)<span class="comment">// &#123;value: undefined, done: true&#125; </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”Ÿæˆå™¨ï¼Œå‡½æ•°åˆ›å»ºä¹‹åï¼Œä»£ç ä¸æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">// æ¯è°ƒç”¨ä¸€æ¬¡nextæ‰§è¡Œåˆ°yieldï¼Œè·å–ç»“æœ</span></span><br><span class="line"><span class="comment">// å¦‚æœæ‰§è¡Œnextä¹‹åæ— æ³•è·å–ç»“æœï¼Œ done: false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. é€šè¿‡for of è·å–æ¯ä¸€ä¸ªyieldä¹‹åçš„å€¼ï¼Œ</span></span><br><span class="line"><span class="comment">// è¿­ä»£å™¨åè®® å¯ä»¥è‡ªå®šä¹‰ for of çš„æ—¶å€™çš„è¡Œä¸º</span></span><br><span class="line"><span class="comment">// iteratorè¿­ä»£ï¼ˆå¾ªç¯çš„æ¯ä¸€é¡¹ï¼‰</span></span><br><span class="line"><span class="comment">// f2 å¾ªç¯çš„å†…å®¹</span></span><br><span class="line"><span class="keyword">const</span> f2 = <span class="title function_">foo</span>()</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> iterator <span class="keyword">of</span> f2) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(iterator)  <span class="comment">// a b c d è·å–æ¯ä¸€ä¸ª yeild ä¹‹åçš„ç»“æœ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// for of</span></span><br><span class="line"><span class="comment">// å¯ä»¥ç”¨æ¥éå†ä¸€äº›ç¬¦åˆ è¿­ä»£å™¨åè®®çš„æ•°æ® æ¯”å¦‚æ•°ç»„</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Generator-idç”Ÿæˆå™¨"><a href="#Generator-idç”Ÿæˆå™¨" class="headerlink" title="Generator-idç”Ÿæˆå™¨"></a>Generator-idç”Ÿæˆå™¨</h3><p>**éœ€æ±‚:**ä½¿ç”¨<code>Generator</code>å®ç°ä¸€ä¸ªidç”Ÿæˆå™¨id</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">idGenerator</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// é€»è¾‘ç•¥</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> idMaker = <span class="title function_">idGenerator</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨nextæ–¹æ³•,è·å–id(æ¯æ¬¡ç´¯åŠ 1)</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">value</span>: id1 &#125; = idMaker.<span class="title function_">next</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(id1)</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">value</span>: id2 &#125; = idMaker.<span class="title function_">next</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(id2)</span><br></pre></td></tr></table></figure><p><strong>æ ¸å¿ƒæ­¥éª¤:</strong></p><ol><li>å®šä¹‰ç”Ÿæˆå™¨å‡½æ•°</li><li>å†…éƒ¨ä½¿ç”¨å¾ªç¯,é€šè¿‡<code>yield</code>è¿”å›<code>id</code>å¹¶ç´¯åŠ </li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. é€šè¿‡function* åˆ›å»ºç”Ÿæˆå™¨å‡½æ•° </span></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">generator</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> id = <span class="number">0</span></span><br><span class="line">  <span class="comment">// æ— é™å¾ªç¯</span></span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="comment">// idç´¯åŠ å¹¶è¿”å›</span></span><br><span class="line">    <span class="keyword">yield</span> id++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2. è°ƒç”¨å‡½æ•°è·å–ç”Ÿæˆå™¨</span></span><br><span class="line"><span class="keyword">const</span> idMaker = <span class="title function_">generator</span>()</span><br><span class="line"><span class="comment">// 3. éœ€è¦idçš„æ—¶å€™ é€šè¿‡nextè·å–å³å¯</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">value</span>: id1 &#125; = idMaker.<span class="title function_">next</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(id1)</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">value</span>: id2 &#125; = idMaker.<span class="title function_">next</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(id2)</span><br></pre></td></tr></table></figure><h3 id="Generator-æµç¨‹æ§åˆ¶"><a href="#Generator-æµç¨‹æ§åˆ¶" class="headerlink" title="Generator-æµç¨‹æ§åˆ¶"></a>Generator-æµç¨‹æ§åˆ¶</h3><p>é‡åˆ°<code>yield</code>è¡¨è¾¾å¼æ—¶ä¼š<strong>æš‚åœ</strong>åç»­çš„æ“ä½œ</p><p>**éœ€æ±‚:**ä½¿ç”¨<code>Generator</code>å®ç°æµç¨‹æ§åˆ¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">weatherGenerator</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">// é€»è¾‘ç•¥</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">axios</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è·å–Generatorå®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> weather = <span class="title function_">weatherGenerator</span>()</span><br><span class="line"><span class="comment">// ä¾æ¬¡è·å– åŒ—ä¸Šå¹¿æ·±çš„å¤©æ°” (axios)</span></span><br><span class="line">weather.<span class="title function_">next</span>()</span><br></pre></td></tr></table></figure><p><strong>æ ¸å¿ƒæ­¥éª¤:</strong></p><ol><li><code>yield</code>åé¢è·Ÿä¸Šå¤©æ°”æŸ¥è¯¢é€»è¾‘</li><li><a href="https://apifox.com/apidoc/project-1937884/api-49760220">æ¥å£æ–‡æ¡£-å¤©æ°”é¢„æŠ¥</a></li><li>å‚è€ƒ<code>code</code>:åŒ—äº¬ 110100  ä¸Šæµ· 310100  å¹¿å· 440100 æ·±åœ³ 440300</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;getWeather&quot;</span>&gt;</span>å¤©æ°”æŸ¥è¯¢<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/axios/1.3.6/axios.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">   * éœ€æ±‚ï¼šæµç¨‹æ§åˆ¶ï¼Œä¾æ¬¡æŸ¥è¯¢ï¼ŒåŒ—ä¸Šå¹¿æ·±çš„å¤©æ°”é¢„æŠ¥</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">   * å‚è€ƒcode: åŒ—äº¬ 110100  ä¸Šæµ· 310100  å¹¿å· 440100 æ·±åœ³ 440300</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">   * æ¥å£æ–‡æ¡£: https://apifox.com/apidoc/project-1937884/api-49760220</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">   * */</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span>* <span class="title function_">weatherGenerator</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// yield ä¼šæš‚åœä»£ç çš„æ‰§è¡Œ</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// åŒ—äº¬</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">yield</span> <span class="title function_">axios</span>(<span class="string">&#x27;http://hmajax.itheima.net/api/weather?city=110100&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// ä¸Šæµ·</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">yield</span> <span class="title function_">axios</span>(<span class="string">&#x27;http://hmajax.itheima.net/api/weather?city=310100&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// å¹¿å·</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">yield</span> <span class="title function_">axios</span>(<span class="string">&#x27;http://hmajax.itheima.net/api/weather?city=440100&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// æ·±åœ³</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">yield</span> <span class="title function_">axios</span>(<span class="string">&#x27;http://hmajax.itheima.net/api/weather?city=440300&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cityWeather = <span class="title function_">weatherGenerator</span>()</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="comment">//const response = weather.next()</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// ç»§ç»­ .then</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">//response.value.then(res =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">//   console.log(res)</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">//&#125;)</span></span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.getWeather&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">async</span> () =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> res = <span class="keyword">await</span> genCity.<span class="title function_">next</span>()</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> this </tag>
            
            <tag> æ‰‹å†™ </tag>
            
            <tag> ç»§æ‰¿ </tag>
            
            <tag> fetch </tag>
            
            <tag> Generato </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSé¢è¯•</title>
      <link href="/posts/3927.html"/>
      <url>/posts/3927.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-è°ˆè°ˆä½ å¯¹é—­åŒ…çš„ç†è§£ï¼Ÿ"><a href="#1-è°ˆè°ˆä½ å¯¹é—­åŒ…çš„ç†è§£ï¼Ÿ" class="headerlink" title="1. è°ˆè°ˆä½ å¯¹é—­åŒ…çš„ç†è§£ï¼Ÿ"></a>1. è°ˆè°ˆä½ å¯¹é—­åŒ…çš„ç†è§£ï¼Ÿ</h2><p>è¿™ä¸ªé—®é¢˜æƒ³è€ƒå¯Ÿçš„ä¸»è¦æœ‰ä¸¤ä¸ªæ–¹é¢ï¼š</p><ul><li>å¯¹é—­åŒ…çš„åŸºæœ¬æ¦‚å¿µçš„ç†è§£</li><li>å¯¹é—­åŒ…çš„ä½œç”¨çš„äº†è§£</li></ul><p><strong>ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ</strong></p><p>MDNçš„å®˜æ–¹è§£é‡Šï¼š</p><blockquote><p><code>é—­åŒ…æ˜¯å‡½æ•°å’Œå£°æ˜è¯¥å‡½æ•°çš„è¯æ³•ç¯å¢ƒçš„ç»„åˆ</code></p></blockquote><p>æ›´é€šä¿—ä¸€ç‚¹çš„è§£é‡Šæ˜¯ï¼š</p><blockquote><p><code>å†…å±‚å‡½æ•°, å¼•ç”¨å¤–å±‚å‡½æ•°ä¸Šçš„å˜é‡, å°±å¯ä»¥å½¢æˆé—­åŒ…</code></p></blockquote><p>éœ€æ±‚: å®šä¹‰ä¸€ä¸ªè®¡æ•°å™¨æ–¹æ³•, æ¯æ¬¡æ‰§è¡Œä¸€æ¬¡å‡½æ•°, å°±è°ƒç”¨ä¸€æ¬¡è¿›è¡Œè®¡æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>      <span class="comment">// å…¨å±€å˜é‡ï¼Œå¤ªå®¹æ˜“è¢«åˆ«äººä¿®æ”¹äº†ï¼Œå¸Œæœ›æœ‰äº›æ•°æ®æ˜¯ç§æœ‰çš„ï¼Œä¸è®©å¤–éƒ¨éšæ„çš„è®¿é—®</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span> () &#123;</span><br><span class="line">  count++</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fnå‡½æ•°è¢«è°ƒç”¨äº†&#x27;</span> + count + <span class="string">&#x27;æ¬¡&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>()</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¸å¥½! count å®šä¹‰æˆäº†å…¨å±€å˜é‡, å¤ªå®¹æ˜“è¢«åˆ«äººä¿®æ”¹äº†,  æˆ‘ä»¬å¯ä»¥åˆ©ç”¨é—­åŒ…è§£å†³</p><p>é—­åŒ…å®ä¾‹:</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span> () &#123;</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span>   <span class="comment">// å±€éƒ¨å˜é‡ï¼Œå¤–éƒ¨è®¿é—®ä¸åˆ°</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">add</span> () &#123;</span><br><span class="line">    count++       <span class="comment">//  å¼•ç”¨å¤–å±‚å‡½æ•°ä¸Šçš„å˜é‡ï¼Œå½¢æˆé—­åŒ…</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fnå‡½æ•°è¢«è°ƒç”¨äº†&#x27;</span> + count + <span class="string">&#x27;æ¬¡&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> add   <span class="comment">// æ³¨æ„ï¼šéœ€è¦ return å¼•ç”¨ï¼ˆå†…å­˜æ‰ä¸ä¼šè¢«é‡Šæ”¾ï¼‰</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> addFn = <span class="title function_">fn</span>()</span><br><span class="line"><span class="title function_">addFn</span>()</span><br><span class="line"><span class="title function_">addFn</span>()</span><br><span class="line"><span class="title function_">addFn</span>()</span><br></pre></td></tr></table></figure><p>æ ‡è®°æ¸…é™¤ï¼šä»æ ¹éƒ¨ï¼Œå…¨å±€å‡ºå‘ï¼Œè®¿é—®ä¸åˆ°ï¼ˆæ— æ³•è§¦åŠï¼‰çš„å†…å­˜ç©ºé—´ï¼Œå°±ä¼šè¢«è‡ªåŠ¨å›æ”¶</p><p><code>addFn = null</code>    &#x3D;&gt; é‡Šæ”¾å†…å­˜ï¼Œæ–­å¼€äº†å¯¹äºä¹‹å‰å†…éƒ¨å‡½æ•°çš„å¼•ç”¨ï¼Œå¯¹åº”çš„ç¼“å­˜å˜é‡å†…å®¹ä¹Ÿä¼šè¢«é‡Šæ”¾æ‰</p><p><strong>é—­åŒ…çš„ä¸»è¦ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p><code>å®ç°æ•°æ®çš„ç§æœ‰</code></p><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œé—­åŒ…æœ€å¤§çš„ä½œç”¨å°±æ˜¯ç”¨æ¥ **<code>å˜é‡ç§æœ‰</code>**ã€‚</p><p>ä¸‹é¢å†æ¥çœ‹ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ä»¥ let å£°æ˜ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œè€Œä¸æ˜¯ this.name</span></span><br><span class="line">  <span class="comment">// this.name = &#x27;zs&#x27;     =&gt;  p.name</span></span><br><span class="line">  <span class="keyword">let</span> name = <span class="string">&#x27;hm_programmer&#x27;</span> <span class="comment">// æ•°æ®ç§æœ‰ï¼ï¼ï¼ï¼ï¼</span></span><br><span class="line">  </span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">getName</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123; </span><br><span class="line">    <span class="keyword">return</span> name</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">setName</span> = <span class="keyword">function</span>(<span class="params">value</span>)&#123; </span><br><span class="line">    name = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// new:</span></span><br><span class="line"><span class="comment">// 1. åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">// 2. è®©æ„é€ å‡½æ•°çš„thisæŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡</span></span><br><span class="line"><span class="comment">// 3. æ‰§è¡Œæ„é€ å‡½æ•°</span></span><br><span class="line"><span class="comment">// 4. è¿”å›å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="title function_">getName</span>()) <span class="comment">// hm_programmer</span></span><br><span class="line"></span><br><span class="line">p.<span class="title function_">setName</span>(<span class="string">&#x27;Tom&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="title function_">getName</span>()) <span class="comment">// Tom</span></span><br><span class="line"></span><br><span class="line">p.<span class="property">name</span> <span class="comment">// è®¿é—®ä¸åˆ° name å˜é‡ï¼šundefinedï¼ï¼ï¼ï¼ï¼ï¼</span></span><br></pre></td></tr></table></figure><p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå˜é‡ <code>name</code> åªèƒ½é€šè¿‡ Person çš„å®ä¾‹æ–¹æ³•è¿›è¡Œè®¿é—®ï¼Œå¤–éƒ¨ä¸èƒ½ç›´æ¥é€šè¿‡å®ä¾‹è¿›è¡Œè®¿é—®ï¼Œå½¢æˆäº†ä¸€ä¸ªç§æœ‰å˜é‡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ—©æœŸï¼Œé—­åŒ…è¿˜ç”¨äºè§£å†³forå¾ªç¯ä¸­ï¼Œå®šæ—¶æ‰“å°å†…å®¹çš„é—®é¢˜</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span> ; i &lt;= <span class="number">5</span> ; i++) &#123;</span><br><span class="line">   (<span class="keyword">function</span>(<span class="params">num</span>) &#123;</span><br><span class="line">       <span class="comment">// å½¢å‚ä¹Ÿå¯ä»¥ç†è§£ä¸ºå‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡</span></span><br><span class="line">       <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(num)</span><br><span class="line">   &#125;, i * <span class="number">1000</span>)</span><br><span class="line">   &#125;)(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»¥ä¸‹ä»£ç æœ‰æ²¡æœ‰é—­åŒ…</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">outer</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> age = <span class="number">18</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">inner</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(age)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">inner</span>()  <span class="comment">// é—­åŒ… å’Œreturn æ— å…³ ä¸€èˆ¬ç”¨å¤–éƒ¨å‡½æ•°å‘½å  å†…éƒ¨å‡½æ•°è®¿é—®äº†å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸé‡Œçš„å˜é‡</span></span><br><span class="line">&#125;            <span class="comment">// ä¸€èˆ¬ä¼š return å‡ºå»ã€‚ä½†æ˜¯é—­åŒ… !== return</span></span><br><span class="line"><span class="title function_">outer</span>()</span><br></pre></td></tr></table></figure><p>1. </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;getWeather&quot;</span>&gt;</span>å¤©æ°”æŸ¥è¯¢<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/axios/1.3.6/axios.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">   * éœ€æ±‚ï¼šæµç¨‹æ§åˆ¶ï¼Œä¾æ¬¡æŸ¥è¯¢ï¼ŒåŒ—ä¸Šå¹¿æ·±çš„å¤©æ°”é¢„æŠ¥</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">   * å‚è€ƒcode: åŒ—äº¬ 110100  ä¸Šæµ· 310100  å¹¿å· 440100 æ·±åœ³ 440300</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">   * æ¥å£æ–‡æ¡£: https://apifox.com/apidoc/project-1937884/api-49760220</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">   * */</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span>* <span class="title function_">weatherGenerator</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// yield ä¼šæš‚åœä»£ç çš„æ‰§è¡Œ</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// åŒ—äº¬</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">yield</span> <span class="title function_">axios</span>(<span class="string">&#x27;http://hmajax.itheima.net/api/weather?city=110100&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// ä¸Šæµ·</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">yield</span> <span class="title function_">axios</span>(<span class="string">&#x27;http://hmajax.itheima.net/api/weather?city=310100&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// å¹¿å·</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">yield</span> <span class="title function_">axios</span>(<span class="string">&#x27;http://hmajax.itheima.net/api/weather?city=440100&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// æ·±åœ³</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">yield</span> <span class="title function_">axios</span>(<span class="string">&#x27;http://hmajax.itheima.net/api/weather?city=440300&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cityWeather = <span class="title function_">weatherGenerator</span>()</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="comment">//const response = weather.next()</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// ç»§ç»­ .then</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">//response.value.then(res =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">//   console.log(res)</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">//&#125;)</span></span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.getWeather&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">async</span> () =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> res = <span class="keyword">await</span> genCity.<span class="title function_">next</span>()</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2-asyncå‡½æ•°é˜»å¡"><a href="#2-asyncå‡½æ•°é˜»å¡" class="headerlink" title="2. asyncå‡½æ•°é˜»å¡"></a>2. asyncå‡½æ•°é˜»å¡</h2><ol><li><p>asyncå‡½æ•°å†…éƒ¨å¯ä»¥ä½¿ç”¨await ç­‰å¾…promiseæ‰§è¡Œå®Œæ¯•,å†…éƒ¨æ˜¯é˜»å¯’çš„</p></li><li><p>ä½†æ˜¯asyncå‡½æ•°ä¸ä¼šé˜»å¡åŒçº§ä»£ç çš„æ‰§è¡Œ,é™¤éç”¨asyncè¥¿æ•°å†åŒ…ä¸€å±‚</p></li><li><p>æ¯”å¦‚,æˆ‘ä¹‹å‰åœ¨åšå¯¼èˆªå®ˆå«åˆ¤æ–­çš„æ—¶å€™,æœ‰ä¸€ä¸ªé€»è¾‘</p><ol><li>actionè·å–ç”¨æˆ·ä¿¡æ¯</li><li>åŸºäºç”¨æˆ·ä¿¡æ¯åˆ¤æ–­æ˜¯å¦ç™»å½•</li><li>æœ€å¼€å§‹æ²¡æœ‰å†™ <mark class="hl-label red">await</mark>  ,å¯¼è‡´ç¬¬ä¸€æ¬¡åˆ¤æ–­ä¸é€šè¿‡,ç¬¬äºŒæ¬¡æ‰å¯</li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> é¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsé¢è¯•é¢˜ </tag>
            
            <tag> é—­åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨nodejsç¯å¢ƒä¸­åº”ç”¨å¹¶ä»£ç†è·¨åŸŸ</title>
      <link href="/posts/882eae4.html"/>
      <url>/posts/882eae4.html</url>
      
        <content type="html"><![CDATA[<h2 id="åœ¨nodejsç¯å¢ƒä¸­åº”ç”¨å¹¶ä»£ç†è·¨åŸŸ"><a href="#åœ¨nodejsç¯å¢ƒä¸­åº”ç”¨å¹¶ä»£ç†è·¨åŸŸ" class="headerlink" title="åœ¨nodejsç¯å¢ƒä¸­åº”ç”¨å¹¶ä»£ç†è·¨åŸŸ"></a>åœ¨nodejsç¯å¢ƒä¸­åº”ç”¨å¹¶ä»£ç†è·¨åŸŸ</h2><p>**<code>ç›®æ ‡</code>**å°†æ‰“åŒ…å¥½çš„ä»£ç æ‰“åŒ…ä¸Šçº¿ï¼Œå¹¶åœ¨nodejsä¸­ä»£ç†è·¨åŸŸ</p><h3 id="ä½¿ç”¨koaæ¡†æ¶éƒ¨ç½²é¡¹ç›®"><a href="#ä½¿ç”¨koaæ¡†æ¶éƒ¨ç½²é¡¹ç›®" class="headerlink" title="ä½¿ç”¨koaæ¡†æ¶éƒ¨ç½²é¡¹ç›®"></a>ä½¿ç”¨koaæ¡†æ¶éƒ¨ç½²é¡¹ç›®</h3><blockquote><p>åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ä¸€ä¸ªå‰ç«¯å·¥ç¨‹å¸ˆçš„å¼€å‘æµç¨‹ï¼ŒæŒ‰ç…§å¸¸è§„çš„åšæ³•ï¼Œæ­¤æ—¶ï¼Œè¿ç»´ä¼šå°†æˆ‘ä»¬çš„ä»£ç éƒ¨ç½²åˆ°é˜¿é‡Œäº‘çš„ngixæœåŠ¡ä¸Šï¼Œå¯¹äºæˆ‘ä»¬è€Œè¨€ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶éƒ¨ç½²åˆ°æœ¬æœºçš„nodejsç¯å¢ƒä¸­</p></blockquote><p>éƒ¨ç½² è‡ªåŠ¨åŒ–éƒ¨ç½² &#x2F;æ‰‹åŠ¨éƒ¨ç½²</p><p>ç¬¬ä¸€æ­¥ï¼Œå»ºç«‹webæœåŠ¡æ–‡ä»¶å¤¹  <strong><code>hrServer</code></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> hrServer <span class="comment">#å»ºç«‹hrServeræ–‡ä»¶å¤¹ </span></span><br></pre></td></tr></table></figure><p>ç¬¬äºŒæ­¥ï¼Œåœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹ï¼Œåˆå§‹åŒ–npm</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm init -y</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰æ­¥ï¼Œå®‰è£…æœåŠ¡ç«¯æ¡†æ¶koa(ä¹Ÿå¯ä»¥é‡‡ç”¨expressæˆ–è€…egg)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i koa koa-static</span><br></pre></td></tr></table></figure><p>ç¬¬å››æ­¥ï¼Œæ‹·è´ä¸Šå°èŠ‚æ‰“åŒ…çš„distç›®å½•åˆ°**<code>hrServer/public</code>**ä¸‹</p><p>ç¬¬äº”æ­¥ï¼Œåœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºapp.jsï¼Œä»£ç å¦‚ä¸‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Koa</span>  = <span class="built_in">require</span>(<span class="string">&#x27;koa&#x27;</span>)  <span class="comment">// å¼•å…¥KoaåŒ…</span></span><br><span class="line"><span class="keyword">const</span> serve = <span class="built_in">require</span>(<span class="string">&#x27;koa-static&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Koa</span>();  <span class="comment">// å®ä¾‹åŒ–ä¸€ä¸ªwebæœåŠ¡</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">serve</span>(__dirname + <span class="string">&quot;/public&quot;</span>)); <span class="comment">//å°†publicä¸‹çš„ä»£ç é™æ€åŒ–</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3333</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;äººèµ„é¡¹ç›®å¯åŠ¨&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>node app</p><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®ï¼Œ<a href="http://localhost:3333/">http://localhost:3333</a></p></blockquote><p>é¡µé¢å‡ºæ¥äº†</p><h3 id="è§£å†³historyé¡µé¢404é—®é¢˜"><a href="#è§£å†³historyé¡µé¢404é—®é¢˜" class="headerlink" title="è§£å†³historyé¡µé¢404é—®é¢˜"></a>è§£å†³historyé¡µé¢404é—®é¢˜</h3><p>ä½†æ˜¯ï¼Œæ­¤æ—¶å­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼Œ</p><ol><li><strong>å½“æˆ‘ä»¬åˆ·æ–°é¡µé¢ï¼Œå‘ç°404</strong></li></ol><blockquote><p>  è¿™æ˜¯å› ä¸ºæˆ‘ä»¬é‡‡ç”¨äº†historyçš„æ¨¡å¼ï¼Œåœ°å€çš„å˜åŒ–ä¼šå¼•èµ·æœåŠ¡å™¨çš„åˆ·æ–°ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨app.jså¯¹æ‰€æœ‰çš„åœ°å€è¿›è¡Œä¸€ä¸‹å¤„ç†å³å¯</p></blockquote><p>å®‰è£… koaä¸­é—´ä»¶ </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i koa2-connect-history-api-fallback <span class="comment">#ä¸“é—¨å¤„ç†historyæ¨¡å¼çš„ä¸­é—´ä»¶</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨å†Œä¸­é—´ä»¶</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Koa</span>  = <span class="built_in">require</span>(<span class="string">&#x27;koa&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> serve = <span class="built_in">require</span>(<span class="string">&#x27;koa-static&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span>  &#123; historyApiFallback &#125; = <span class="built_in">require</span>(<span class="string">&#x27;koa2-connect-history-api-fallback&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Koa</span>();</span><br><span class="line"><span class="comment">// è¿™å¥è¯ çš„æ„æ€æ˜¯é™¤æ¥å£ä¹‹å¤–æ‰€æœ‰çš„è¯·æ±‚éƒ½å‘é€ç»™äº† index.html</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">historyApiFallback</span>(&#123;      <span class="comment">//åº”è¯¥å…ˆä½¿ç”¨ å¤„ç†è®¿é—®çš„ä¸­é—´ä»¶ å†ä½¿ç”¨é™æ€åŒ–æœåŠ¡</span></span><br><span class="line">     <span class="attr">whiteList</span>: [<span class="string">&#x27;/prod-api&#x27;</span>]  <span class="comment">//prod-apiä»£ç†è·¨åŸŸçš„é—®é¢˜  è¡¨ç¤ºä¸è¦å¸®æˆ‘å¤„ç† /prod-api ç”±è‡ªå·±å¤„ç†</span></span><br><span class="line"> &#125;));  <span class="comment">// è¿™é‡Œçš„whiteListæ˜¯ ç™½åå•çš„æ„æ€</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">serve</span>(__dirname + <span class="string">&quot;/public&quot;</span>)); <span class="comment">//å°†publicä¸‹çš„ä»£ç é™æ€åŒ–</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3333</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;äººèµ„é¡¹ç›®å¯åŠ¨http://localhost:3333&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="è§£å†³ç”Ÿäº§ç¯å¢ƒè·¨åŸŸé—®é¢˜"><a href="#è§£å†³ç”Ÿäº§ç¯å¢ƒè·¨åŸŸé—®é¢˜" class="headerlink" title="è§£å†³ç”Ÿäº§ç¯å¢ƒè·¨åŸŸé—®é¢˜"></a>è§£å†³ç”Ÿäº§ç¯å¢ƒè·¨åŸŸé—®é¢˜</h3><ol><li>å½“ç‚¹å‡»ç™»å½•æ—¶ï¼Œå‘ç°æ¥å£404</li></ol><blockquote><p>  å‰é¢æˆ‘ä»¬è®²è¿‡ï¼Œvue-cliçš„ä»£ç†åªå­˜åœ¨äºå¼€å‘æœŸï¼Œå½“æˆ‘ä»¬ä¸Šçº¿åˆ°nodeç¯å¢ƒæˆ–è€…ngixç¯å¢ƒæ—¶ï¼Œéœ€è¦æˆ‘ä»¬å†æ¬¡åœ¨ç¯å¢ƒä¸­ä»£ç†</p></blockquote><p>åœ¨nodejsä¸­ä»£ç†</p><p>å®‰è£…è·¨åŸŸä»£ç†ä¸­é—´ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i koa2-proxy-middleware</span><br></pre></td></tr></table></figure><p>é…ç½®è·¨è¶Šä»£ç†</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Koa</span> = <span class="built_in">require</span>(<span class="string">&#x27;koa&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> serve = <span class="built_in">require</span>(<span class="string">&#x27;koa-static&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; historyApiFallback &#125; = <span class="built_in">require</span>(<span class="string">&#x27;koa2-connect-history-api-fallback&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> proxy = <span class="built_in">require</span>(<span class="string">&#x27;koa2-proxy-middleware&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Koa</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ³¨å†Œè·¨åŸŸä»£ç†çš„ä¸­é—´ä»¶</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">proxy</span>(&#123;</span><br><span class="line">    <span class="attr">targets</span>: &#123;</span><br><span class="line">        <span class="comment">// ä»£ç†å“ªä¸ªåœ°å€  ä»£ç†ä»¥ &#x27;/prod-api&#x27;ä¸ºå¼€å¤´çš„åœ°å€</span></span><br><span class="line">        <span class="string">&#x27;/prod-api/(.*)&#x27;</span>: &#123;</span><br><span class="line">            <span class="attr">target</span>: <span class="string">&#x27;https://heimahr.itheima.net/api&#x27;</span>, <span class="comment">// å°†ä»¥prod/apiå¼€å¤´çš„å†…å®¹ä»£ç†åˆ°è¯¥åœ°å€  åç«¯æœåŠ¡å™¨åœ°å€</span></span><br><span class="line">            <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;/prod-api&#x27;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™å¥è¯ çš„æ„æ€æ˜¯é™¤æ¥å£ä¹‹å¤–æ‰€æœ‰çš„è¯·æ±‚éƒ½å‘é€ç»™äº† index.html</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">historyApiFallback</span>(&#123; <span class="comment">//åº”è¯¥å…ˆä½¿ç”¨ å¤„ç†è®¿é—®çš„ä¸­é—´ä»¶ å†ä½¿ç”¨é™æ€åŒ–æœåŠ¡</span></span><br><span class="line">    <span class="attr">whiteList</span>: [<span class="string">&#x27;/prod-api&#x27;</span>] <span class="comment">// prod-apiä»£ç†è·¨åŸŸçš„é—®é¢˜  è¡¨ç¤ºä¸è¦å¸®æˆ‘å¤„ç† /prod-api ç”±è‡ªå·±å¤„ç†</span></span><br><span class="line">&#125;)); <span class="comment">// è¿™é‡Œçš„whiteListæ˜¯ ç™½åå•çš„æ„æ€</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">serve</span>(__dirname + <span class="string">&quot;/public&quot;</span>)); <span class="comment">//å°†publicä¸‹çš„ä»£ç é™æ€åŒ–</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3333</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;äººèµ„é¡¹ç›®å¯åŠ¨http://localhost:3333&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šè¿™é‡Œä¹‹æ‰€ä»¥ç”¨äº†<strong>pathRewrite</strong>ï¼Œæ˜¯å› ä¸ºç”Ÿäº§ç¯å¢ƒçš„è¯·æ±‚åŸºç¡€åœ°å€æ˜¯ <strong>&#x2F;prod-api</strong>ï¼Œéœ€è¦å°†è¯¥åœ°å€å»æ‰</p><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬çš„é¡¹ç›®å°±å¯ä»¥è·¨åŸŸè®¿é—®äº†ï¼</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> koa </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é˜³å…‰ä¸é”™ï¼Œå¾®é£æ­£å¥½</title>
      <link href="/posts/b313554c.html"/>
      <url>/posts/b313554c.html</url>
      
        <content type="html"><![CDATA[<h1 id="å¤è‡³"><a href="#å¤è‡³" class="headerlink" title="å¤è‡³"></a>å¤è‡³</h1><p>  ä¸€ç”Ÿçš„æ—¶é—´å¾ˆçŸ­<br>  çŸ­åˆ°ä¸è¿‡æ˜¯ä¸¤é¢—å¿ƒä¹‹é—´çš„è·ç¦»<br>  ä¸€ç”Ÿçš„æ—¶é—´ä¹Ÿå¾ˆé•¿<br>  ä¸å¦‚æˆ‘ä»¬è¯•ç€èµ°èµ°çœ‹</p>  <button type="button" onclick="SAONotify('Update','link start...','location.reload(true);')">SAOåˆ·æ–°æŒ‰é’®</button>]]></content>
      
      
      <categories>
          
          <category> ç”Ÿæ´» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç”Ÿæ´» </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
